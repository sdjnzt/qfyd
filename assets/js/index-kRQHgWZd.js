import{d as xe,a as v,Z as S,z as Ce,e as J,k as D,j as e,b as t,r,q as n,m as M,ab as ke,ac as we,ad as Te,ae as Re,P as Ue,F as Ye,f as Le,t as u,c as B,aa as W,X as f,Y as h,o as R,K as Me,n as $e}from"./vendor-CgAfaZZC.js";import{_ as Fe}from"./index-BrFT0OYg.js";const Qe={class:"approval-container"},Ae={class:"page-header"},ze={class:"page-actions"},Se={class:"stat-content"},Be={class:"stat-info"},je={class:"stat-number"},qe={class:"stat-label"},Ee={class:"card-header"},Ne={class:"pagination-wrapper"},Ie=xe({__name:"index",setup(Pe){const ee=v([{label:"待审批",value:8,icon:"Clock",type:"warning"},{label:"已通过",value:156,icon:"Check",type:"success"},{label:"已拒绝",value:12,icon:"Close",type:"danger"},{label:"本月申请",value:45,icon:"Document",type:"primary"}]),b=S({applicant:"",type:"",status:""}),j=v(1),q=v(10),$=v(0),U=v(!1),k=v(!1),F=v(!1),Y=v(!1),w=v(null),m=v({}),p=S({id:"",applicant:"",department:"",type:"",dateRange:[],reason:"",status:""}),E=v(),N=v(),I=v(),c=S({applicant:"",department:"",type:"",dateRange:[],reason:""}),y=S({action:"approve",comment:""}),K={applicant:[{required:!0,message:"请输入申请人姓名",trigger:"blur"}],department:[{required:!0,message:"请输入部门名称",trigger:"blur"}],type:[{required:!0,message:"请选择请假类型",trigger:"change"}],dateRange:[{required:!0,message:"请选择请假时间",trigger:"change"}],reason:[{required:!0,message:"请输入请假原因",trigger:"blur"}]},x=v([{id:"LQ001",applicant:"王明",department:"信息技术部",type:"事假",startDate:"2025-06-15",endDate:"2025-06-16",days:2,reason:"家中老人生病需要照顾",status:"待审批",approver:"",approvalTime:""},{id:"LQ002",applicant:"李华",department:"教务处",type:"病假",startDate:"2025-06-14",endDate:"2025-06-14",days:1,reason:"感冒发烧需要就医休息",status:"已通过",approver:"张主任",approvalTime:"2025-06-13 14:30"},{id:"LQ003",applicant:"陈静",department:"学生处",type:"年假",startDate:"2025-06-20",endDate:"2025-06-22",days:3,reason:"春节期间探亲访友",status:"已拒绝",approver:"刘主任",approvalTime:"2025-06-12 16:45"},{id:"LQ004",applicant:"赵伟",department:"财务处",type:"调休",startDate:"2025-06-18",endDate:"2025-06-18",days:1,reason:"上周末加班调休",status:"待审批",approver:"",approvalTime:""},{id:"LQ005",applicant:"杨丽",department:"图书馆",type:"事假",startDate:"2025-06-25",endDate:"2025-06-26",days:2,reason:"参加亲友婚礼",status:"已通过",approver:"周馆长",approvalTime:"2025-06-14 09:15"},{id:"LQ006",applicant:"张强",department:"后勤处",type:"病假",startDate:"2025-06-16",endDate:"2025-06-17",days:2,reason:"腰椎间盘突出需要治疗",status:"已通过",approver:"刘处长",approvalTime:"2025-06-15 10:20"},{id:"LQ007",applicant:"周婷",department:"招生办",type:"年假",startDate:"2025-02-01",endDate:"2025-02-05",days:5,reason:"春节假期返乡",status:"待审批",approver:"",approvalTime:""},{id:"LQ008",applicant:"吴刚",department:"人事处",type:"事假",startDate:"2025-06-22",endDate:"2025-06-22",days:1,reason:"办理个人住房贷款手续",status:"已拒绝",approver:"陈处长",approvalTime:"2025-06-21 15:30"},{id:"LQ009",applicant:"郑小燕",department:"科研处",type:"病假",startDate:"2025-06-19",endDate:"2025-06-20",days:2,reason:"急性胃炎需要住院治疗",status:"已通过",approver:"王主任",approvalTime:"2025-06-18 16:45"},{id:"LQ010",applicant:"林志远",department:"国际交流处",type:"调休",startDate:"2025-06-24",endDate:"2025-06-24",days:1,reason:"接待外宾加班调休",status:"待审批",approver:"",approvalTime:""},{id:"LQ011",applicant:"黄敏",department:"保卫处",type:"事假",startDate:"2025-06-28",endDate:"2025-06-29",days:2,reason:"参加安保技能培训",status:"已通过",approver:"张处长",approvalTime:"2025-06-27 11:20"},{id:"LQ012",applicant:"孙文彬",department:"团委",type:"年假",startDate:"2025-02-10",endDate:"2025-02-12",days:3,reason:"寒假期间探亲",status:"待审批",approver:"",approvalTime:""}]),O=o=>({事假:"warning",病假:"danger",年假:"success",调休:"info"})[o]||"info",X=o=>({待审批:"warning",已通过:"success",已拒绝:"danger"})[o]||"info",Z=()=>{f.info("执行搜索操作")},ae=()=>{b.applicant="",b.type="",b.status="",Z()},te=()=>{f.success("数据已刷新")},le=o=>{m.value={...o},F.value=!0},oe=o=>{y.action="approve",y.comment="",k.value=!0,w.value=o},ne=o=>{y.action="reject",y.comment="",k.value=!0,w.value=o},pe=o=>{p.id=o.id,p.applicant=o.applicant,p.department=o.department,p.type=o.type,p.dateRange=[o.startDate,o.endDate],p.reason=o.reason,p.status=o.status,Y.value=!0},se=o=>{h.confirm(`确认删除请假申请"${o.id}"？`,"删除确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{const a=x.value.findIndex(V=>V.id===o.id);a>-1&&(x.value.splice(a,1),$.value=x.value.length,f.success("删除成功"))}).catch(()=>{})},re=()=>{const o=x.value.filter(a=>a.status==="待审批");if(o.length===0){f.warning("没有待审批的申请");return}h.confirm(`确认批量通过 ${o.length} 个申请？`,"批量审批",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{o.forEach(a=>{a.status="已通过",a.approver="系统管理员",a.approvalTime=new Date().toLocaleString()}),f.success("批量审批成功")}).catch(()=>{})},de=()=>{f.success("数据导出成功")},ue=()=>{f.info("准备打印数据")},ie=async()=>{if(E.value)try{await E.value.validate(),f.success("请假申请提交成功"),U.value=!1,Object.assign(c,{applicant:"",department:"",type:"",dateRange:[],reason:""})}catch{f.error("请完善表单信息")}},me=async()=>{if(N.value)try{await N.value.validate();const o=y.action==="approve"?"通过":"拒绝";w.value&&(w.value.status=y.action==="approve"?"已通过":"已拒绝",w.value.approver="当前用户",w.value.approvalTime=new Date().toLocaleString()),f.success(`审批操作成功：${o}`),k.value=!1}catch{f.error("请完善审批信息")}},ve=async()=>{if(I.value)try{await I.value.validate();const o=x.value.findIndex(a=>a.id===p.id);if(o>-1){const a=new Date(p.dateRange[0]),V=new Date(p.dateRange[1]),s=Math.ceil((V.getTime()-a.getTime())/(1e3*60*60*24))+1;x.value[o]={...x.value[o],applicant:p.applicant,department:p.department,type:p.type,startDate:p.dateRange[0],endDate:p.dateRange[1],days:s,reason:p.reason},f.success("请假申请更新成功"),Y.value=!1}}catch{f.error("请完善表单信息")}},fe=o=>{q.value=o},ce=o=>{j.value=o};return Ce(()=>{$.value=x.value.length}),(o,a)=>{const V=r("el-icon"),s=r("el-button"),P=r("el-card"),_e=r("el-col"),ye=r("el-row"),C=r("el-input"),d=r("el-form-item"),i=r("el-option"),Q=r("el-select"),A=r("el-form"),L=r("el-tag"),_=r("el-table-column"),ge=r("el-table"),be=r("el-pagination"),G=r("el-date-picker"),z=r("el-dialog"),H=r("el-radio"),Ve=r("el-radio-group"),g=r("el-descriptions-item"),De=r("el-descriptions");return R(),J("div",Qe,[D("div",Ae,[a[31]||(a[31]=D("h2",{class:"page-title"},"办公自动化-请假审批管理",-1)),D("div",ze,[e(s,{type:"primary",onClick:a[0]||(a[0]=l=>U.value=!0),class:"text-button"},{default:t(()=>[e(V,null,{default:t(()=>[e(M(ke))]),_:1}),a[26]||(a[26]=n("新增请假申请 "))]),_:1,__:[26]}),e(s,{type:"success",onClick:re,class:"text-button"},{default:t(()=>[e(V,null,{default:t(()=>[e(M(we))]),_:1}),a[27]||(a[27]=n("批量审批 "))]),_:1,__:[27]}),e(s,{type:"info",onClick:de,class:"text-button"},{default:t(()=>[e(V,null,{default:t(()=>[e(M(Te))]),_:1}),a[28]||(a[28]=n("导出数据 "))]),_:1,__:[28]}),e(s,{type:"warning",onClick:ue,class:"text-button"},{default:t(()=>[e(V,null,{default:t(()=>[e(M(Re))]),_:1}),a[29]||(a[29]=n("打印 "))]),_:1,__:[29]}),e(s,{onClick:te,class:"text-button"},{default:t(()=>[e(V,null,{default:t(()=>[e(M(Ue))]),_:1}),a[30]||(a[30]=n("刷新 "))]),_:1,__:[30]})])]),e(ye,{gutter:20,class:"stat-row"},{default:t(()=>[(R(!0),J(Ye,null,Le(ee.value,(l,T)=>(R(),B(_e,{xs:24,sm:12,md:6,key:T},{default:t(()=>[e(P,{shadow:"hover",class:"stat-card"},{default:t(()=>[D("div",Se,[e(V,{class:Me(["stat-icon",l.type])},{default:t(()=>[(R(),B($e(l.icon)))]),_:2},1032,["class"]),D("div",Be,[D("div",je,u(l.value),1),D("div",qe,u(l.label),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(P,{class:"search-card",shadow:"hover"},{default:t(()=>[e(A,{model:b,inline:""},{default:t(()=>[e(d,{label:"申请人"},{default:t(()=>[e(C,{modelValue:b.applicant,"onUpdate:modelValue":a[1]||(a[1]=l=>b.applicant=l),placeholder:"请输入申请人姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(d,{label:"请假类型"},{default:t(()=>[e(Q,{modelValue:b.type,"onUpdate:modelValue":a[2]||(a[2]=l=>b.type=l),placeholder:"请选择请假类型",clearable:""},{default:t(()=>[e(i,{label:"事假",value:"事假"}),e(i,{label:"病假",value:"病假"}),e(i,{label:"年假",value:"年假"}),e(i,{label:"调休",value:"调休"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"审批状态"},{default:t(()=>[e(Q,{modelValue:b.status,"onUpdate:modelValue":a[3]||(a[3]=l=>b.status=l),placeholder:"请选择审批状态",clearable:""},{default:t(()=>[e(i,{label:"待审批",value:"待审批"}),e(i,{label:"已通过",value:"已通过"}),e(i,{label:"已拒绝",value:"已拒绝"})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(s,{type:"primary",onClick:Z},{default:t(()=>a[32]||(a[32]=[n("搜索")])),_:1,__:[32]}),e(s,{onClick:ae},{default:t(()=>a[33]||(a[33]=[n("重置")])),_:1,__:[33]})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,{class:"table-card",shadow:"hover"},{header:t(()=>[D("div",Ee,[a[34]||(a[34]=D("span",null,"请假申请列表",-1)),e(L,{type:"info"},{default:t(()=>[n("共 "+u($.value)+" 条记录",1)]),_:1})])]),default:t(()=>[e(ge,{data:x.value,border:"",stripe:""},{default:t(()=>[e(_,{prop:"id",label:"申请编号",width:"100"}),e(_,{prop:"applicant",label:"申请人",width:"120"}),e(_,{prop:"department",label:"部门",width:"150"}),e(_,{prop:"type",label:"请假类型",width:"100"},{default:t(({row:l})=>[e(L,{type:O(l.type)},{default:t(()=>[n(u(l.type),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"startDate",label:"开始时间",width:"150"}),e(_,{prop:"endDate",label:"结束时间",width:"150"}),e(_,{prop:"days",label:"请假天数",width:"100"}),e(_,{prop:"reason",label:"请假原因","show-overflow-tooltip":""}),e(_,{prop:"status",label:"审批状态",width:"100"},{default:t(({row:l})=>[e(L,{type:X(l.status)},{default:t(()=>[n(u(l.status),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"approver",label:"审批人",width:"120"}),e(_,{prop:"approvalTime",label:"审批时间",width:"150"}),e(_,{label:"操作",width:"200",fixed:"right"},{default:t(({row:l})=>[e(s,{type:"primary",class:"text-button",onClick:T=>le(l)},{default:t(()=>a[35]||(a[35]=[n("查看")])),_:2,__:[35]},1032,["onClick"]),l.status==="待审批"?(R(),B(s,{key:0,type:"success",class:"text-button",onClick:T=>oe(l)},{default:t(()=>a[36]||(a[36]=[n("通过")])),_:2,__:[36]},1032,["onClick"])):W("",!0),l.status==="待审批"?(R(),B(s,{key:1,type:"danger",class:"text-button",onClick:T=>ne(l)},{default:t(()=>a[37]||(a[37]=[n("拒绝")])),_:2,__:[37]},1032,["onClick"])):W("",!0),e(s,{type:"warning",class:"text-button",onClick:T=>pe(l)},{default:t(()=>a[38]||(a[38]=[n("编辑")])),_:2,__:[38]},1032,["onClick"]),e(s,{type:"danger",class:"text-button",onClick:T=>se(l)},{default:t(()=>a[39]||(a[39]=[n("删除")])),_:2,__:[39]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),D("div",Ne,[e(be,{"current-page":j.value,"onUpdate:currentPage":a[4]||(a[4]=l=>j.value=l),"page-size":q.value,"onUpdate:pageSize":a[5]||(a[5]=l=>q.value=l),"page-sizes":[10,20,50,100],total:$.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:fe,onCurrentChange:ce},null,8,["current-page","page-size","total"])])]),_:1}),e(z,{modelValue:U.value,"onUpdate:modelValue":a[12]||(a[12]=l=>U.value=l),title:"新增请假申请",width:"600px"},{footer:t(()=>[e(s,{onClick:a[11]||(a[11]=l=>U.value=!1)},{default:t(()=>a[40]||(a[40]=[n("取消")])),_:1,__:[40]}),e(s,{type:"primary",onClick:ie},{default:t(()=>a[41]||(a[41]=[n("提交")])),_:1,__:[41]})]),default:t(()=>[e(A,{model:c,rules:K,ref_key:"approvalFormRef",ref:E,"label-width":"100px"},{default:t(()=>[e(d,{label:"申请人",prop:"applicant"},{default:t(()=>[e(C,{modelValue:c.applicant,"onUpdate:modelValue":a[6]||(a[6]=l=>c.applicant=l),placeholder:"请输入申请人姓名"},null,8,["modelValue"])]),_:1}),e(d,{label:"部门",prop:"department"},{default:t(()=>[e(C,{modelValue:c.department,"onUpdate:modelValue":a[7]||(a[7]=l=>c.department=l),placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"请假类型",prop:"type"},{default:t(()=>[e(Q,{modelValue:c.type,"onUpdate:modelValue":a[8]||(a[8]=l=>c.type=l),placeholder:"请选择请假类型"},{default:t(()=>[e(i,{label:"事假",value:"事假"}),e(i,{label:"病假",value:"病假"}),e(i,{label:"年假",value:"年假"}),e(i,{label:"调休",value:"调休"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"请假时间",prop:"dateRange"},{default:t(()=>[e(G,{modelValue:c.dateRange,"onUpdate:modelValue":a[9]||(a[9]=l=>c.dateRange=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(d,{label:"请假原因",prop:"reason"},{default:t(()=>[e(C,{modelValue:c.reason,"onUpdate:modelValue":a[10]||(a[10]=l=>c.reason=l),type:"textarea",rows:3,placeholder:"请输入请假原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(z,{modelValue:k.value,"onUpdate:modelValue":a[16]||(a[16]=l=>k.value=l),title:"审批请假申请",width:"500px"},{footer:t(()=>[e(s,{onClick:a[15]||(a[15]=l=>k.value=!1)},{default:t(()=>a[44]||(a[44]=[n("取消")])),_:1,__:[44]}),e(s,{type:"primary",onClick:me},{default:t(()=>a[45]||(a[45]=[n("确定")])),_:1,__:[45]})]),default:t(()=>[e(A,{model:y,ref_key:"approvalActionFormRef",ref:N,"label-width":"100px"},{default:t(()=>[e(d,{label:"审批结果",prop:"action"},{default:t(()=>[e(Ve,{modelValue:y.action,"onUpdate:modelValue":a[13]||(a[13]=l=>y.action=l)},{default:t(()=>[e(H,{value:"approve"},{default:t(()=>a[42]||(a[42]=[n("通过")])),_:1,__:[42]}),e(H,{value:"reject"},{default:t(()=>a[43]||(a[43]=[n("拒绝")])),_:1,__:[43]})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"审批意见",prop:"comment"},{default:t(()=>[e(C,{modelValue:y.comment,"onUpdate:modelValue":a[14]||(a[14]=l=>y.comment=l),type:"textarea",rows:3,placeholder:"请输入审批意见"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(z,{modelValue:F.value,"onUpdate:modelValue":a[18]||(a[18]=l=>F.value=l),title:"请假申请详情",width:"600px"},{footer:t(()=>[e(s,{onClick:a[17]||(a[17]=l=>F.value=!1)},{default:t(()=>a[46]||(a[46]=[n("关闭")])),_:1,__:[46]})]),default:t(()=>[e(De,{column:2,border:""},{default:t(()=>[e(g,{label:"申请编号"},{default:t(()=>[n(u(m.value.id),1)]),_:1}),e(g,{label:"申请人"},{default:t(()=>[n(u(m.value.applicant),1)]),_:1}),e(g,{label:"部门"},{default:t(()=>[n(u(m.value.department),1)]),_:1}),e(g,{label:"请假类型"},{default:t(()=>[e(L,{type:O(m.value.type)},{default:t(()=>[n(u(m.value.type),1)]),_:1},8,["type"])]),_:1}),e(g,{label:"开始时间"},{default:t(()=>[n(u(m.value.startDate),1)]),_:1}),e(g,{label:"结束时间"},{default:t(()=>[n(u(m.value.endDate),1)]),_:1}),e(g,{label:"请假天数"},{default:t(()=>[n(u(m.value.days)+" 天",1)]),_:1}),e(g,{label:"审批状态"},{default:t(()=>[e(L,{type:X(m.value.status)},{default:t(()=>[n(u(m.value.status),1)]),_:1},8,["type"])]),_:1}),e(g,{label:"审批人"},{default:t(()=>[n(u(m.value.approver||"暂无"),1)]),_:1}),e(g,{label:"审批时间"},{default:t(()=>[n(u(m.value.approvalTime||"暂无"),1)]),_:1}),e(g,{label:"请假原因",span:2},{default:t(()=>[n(u(m.value.reason),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:Y.value,"onUpdate:modelValue":a[25]||(a[25]=l=>Y.value=l),title:"编辑请假申请",width:"600px"},{footer:t(()=>[e(s,{onClick:a[24]||(a[24]=l=>Y.value=!1)},{default:t(()=>a[47]||(a[47]=[n("取消")])),_:1,__:[47]}),e(s,{type:"primary",onClick:ve},{default:t(()=>a[48]||(a[48]=[n("保存")])),_:1,__:[48]})]),default:t(()=>[e(A,{model:p,rules:K,ref_key:"editFormRef",ref:I,"label-width":"100px"},{default:t(()=>[e(d,{label:"申请人",prop:"applicant"},{default:t(()=>[e(C,{modelValue:p.applicant,"onUpdate:modelValue":a[19]||(a[19]=l=>p.applicant=l),placeholder:"请输入申请人姓名"},null,8,["modelValue"])]),_:1}),e(d,{label:"部门",prop:"department"},{default:t(()=>[e(C,{modelValue:p.department,"onUpdate:modelValue":a[20]||(a[20]=l=>p.department=l),placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"请假类型",prop:"type"},{default:t(()=>[e(Q,{modelValue:p.type,"onUpdate:modelValue":a[21]||(a[21]=l=>p.type=l),placeholder:"请选择请假类型"},{default:t(()=>[e(i,{label:"事假",value:"事假"}),e(i,{label:"病假",value:"病假"}),e(i,{label:"年假",value:"年假"}),e(i,{label:"调休",value:"调休"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"请假时间",prop:"dateRange"},{default:t(()=>[e(G,{modelValue:p.dateRange,"onUpdate:modelValue":a[22]||(a[22]=l=>p.dateRange=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(d,{label:"请假原因",prop:"reason"},{default:t(()=>[e(C,{modelValue:p.reason,"onUpdate:modelValue":a[23]||(a[23]=l=>p.reason=l),type:"textarea",rows:3,placeholder:"请输入请假原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Xe=Fe(Ie,[["__scopeId","data-v-da6291d1"]]);export{Xe as default};
