import{d as ee,a as m,i as z,Z as D,e as te,k as V,j as t,b as l,r as o,q as s,t as c,B as q,X as k,Y as le,o as ae}from"./vendor-BtSynzSy.js";import{_ as ne}from"./index-CqRjJalX.js";const ue={class:"server-container"},oe={class:"card-header"},se={class:"header-actions"},ie={class:"pagination-container"},re={class:"dialog-footer"},pe=ee({__name:"index",setup(de){const f=m(""),v=m(1),C=m(10),r=m([{id:1,name:"教务系统服务器",ip:"192.168.1.10",type:"物理服务器",os:"Linux CentOS 8",cpu:45,memory:60,status:"运行中"},{id:2,name:"学生管理服务器",ip:"192.168.1.11",type:"物理服务器",os:"Windows Server 2019",cpu:65,memory:75,status:"运行中"},{id:3,name:"财务系统服务器",ip:"192.168.1.12",type:"虚拟服务器",os:"Linux Ubuntu 20.04",cpu:35,memory:40,status:"运行中"},{id:4,name:"图书管理服务器",ip:"192.168.1.13",type:"虚拟服务器",os:"Windows Server 2016",cpu:25,memory:30,status:"运行中"},{id:5,name:"备份数据库服务器",ip:"192.168.1.14",type:"物理服务器",os:"Linux CentOS 8",cpu:0,memory:10,status:"已停止"},{id:6,name:"虚拟化平台A",ip:"192.168.1.15",type:"虚拟服务器",os:"Linux Kylin",cpu:55,memory:70,status:"运行中"},{id:7,name:"虚拟化平台B",ip:"192.168.1.16",type:"虚拟服务器",os:"Linux Ubuntu 22.04",cpu:62,memory:80,status:"运行中"},{id:8,name:"门户网站服务器",ip:"192.168.1.17",type:"物理服务器",os:"Windows Server 2019",cpu:48,memory:55,status:"运行中"},{id:9,name:"OA系统服务器",ip:"192.168.1.18",type:"物理服务器",os:"Linux CentOS 7",cpu:41,memory:60,status:"运行中"},{id:10,name:"应急指挥服务器",ip:"192.168.1.19",type:"虚拟服务器",os:"Linux CentOS 8",cpu:58,memory:72,status:"已停止"},{id:11,name:"云桌面服务器",ip:"192.168.1.20",type:"虚拟服务器",os:"Linux Kylin",cpu:38,memory:55,status:"运行中"},{id:12,name:"视频监控服务器",ip:"192.168.1.21",type:"物理服务器",os:"Windows Server 2016",cpu:52,memory:68,status:"运行中"},{id:13,name:"大数据分析服务器",ip:"192.168.1.22",type:"物理服务器",os:"Linux Ubuntu 20.04",cpu:75,memory:85,status:"运行中"},{id:14,name:"科研平台服务器",ip:"192.168.1.23",type:"虚拟服务器",os:"Linux CentOS 8",cpu:68,memory:78,status:"运行中"},{id:15,name:"云存储服务器",ip:"192.168.1.24",type:"物理服务器",os:"Linux Kylin",cpu:35,memory:45,status:"运行中"},{id:16,name:"教室多媒体服务器",ip:"192.168.1.25",type:"虚拟服务器",os:"Windows Server 2019",cpu:55,memory:70,status:"运行中"},{id:17,name:"实验室服务器",ip:"192.168.1.26",type:"物理服务器",os:"Linux Ubuntu 22.04",cpu:62,memory:80,status:"运行中"},{id:18,name:"云备份服务器",ip:"192.168.1.27",type:"虚拟服务器",os:"Linux CentOS 7",cpu:48,memory:55,status:"运行中"},{id:19,name:"档案管理服务器",ip:"192.168.1.28",type:"物理服务器",os:"Windows Server 2016",cpu:41,memory:60,status:"运行中"},{id:20,name:"门户备份服务器",ip:"192.168.1.29",type:"虚拟服务器",os:"Linux CentOS 8",cpu:58,memory:72,status:"已停止"}]),L=z(()=>f.value?r.value.filter(n=>n.name.includes(f.value)||n.ip.includes(f.value)||n.type.includes(f.value)||n.os.includes(f.value)):r.value),M=z(()=>{const n=(v.value-1)*C.value;return L.value.slice(n,n+C.value)});function $(){v.value=1}function B(n){C.value=n,v.value=1}function W(n){v.value=n}const j=n=>n>80?"exception":n>60?"warning":"success",E=n=>n>80?"exception":n>60?"warning":"success",A=n=>{switch(n){case"运行中":return"success";case"已停止":return"info";case"异常":return"danger";case"维护中":return"warning";default:return"info"}},b=m(!1),S=m("add"),u=D({name:"",ip:"",type:"",os:"",cpu:0,memory:0,status:"运行中"}),w=m(),F={name:[{required:!0,message:"请输入服务器名称",trigger:"blur"}],ip:[{required:!0,message:"请输入IP地址",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],os:[{required:!0,message:"请输入操作系统",trigger:"blur"}],cpu:[{required:!0,type:"number",message:"请输入CPU使用率",trigger:"blur"}],memory:[{required:!0,type:"number",message:"请输入内存使用率",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]};function K(){S.value="add",Object.assign(u,{name:"",ip:"",type:"",os:"",cpu:0,memory:0,status:"运行中"}),b.value=!0,q(()=>{var n;return(n=w.value)==null?void 0:n.clearValidate()})}function N(n){S.value="edit",Object.assign(u,n),b.value=!0,q(()=>{var e;return(e=w.value)==null?void 0:e.clearValidate()})}function R(){w.value.validate(n=>{if(n){if(S.value==="add"){const e=Math.max(...r.value.map(i=>i.id),0);r.value.unshift({...u,id:e+1}),k.success("新增成功")}else{const e=r.value.findIndex(i=>i.name===u.name&&i.ip===u.ip);e!==-1&&(r.value[e]={...r.value[e],...u},k.success("编辑成功"))}b.value=!1}})}function T(n){le.confirm(`确定要删除服务器"${n.name}(${n.ip})"吗？`,"删除确认",{type:"warning"}).then(()=>{const e=r.value.findIndex(i=>i.id===n.id);e!==-1&&(r.value.splice(e,1),k.success("删除成功"))}).catch(()=>{})}const U=m(!1),d=D({name:"",ip:"",type:"",os:"",cpu:0,memory:0,status:""});function Q(n){Object.assign(d,n),U.value=!0}return(n,e)=>{const i=o("el-input"),y=o("el-button"),p=o("el-table-column"),I=o("el-progress"),X=o("el-tag"),Y=o("el-table"),Z=o("el-pagination"),G=o("el-card"),_=o("el-form-item"),x=o("el-option"),O=o("el-select"),H=o("el-form"),P=o("el-dialog"),g=o("el-descriptions-item"),J=o("el-descriptions");return ae(),te("div",ue,[e[20]||(e[20]=V("h1",null,"服务器管理",-1)),t(G,{class:"server-card"},{header:l(()=>[V("div",oe,[V("div",se,[t(i,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),placeholder:"搜索服务器（名称/IP/负责人/类型）...",clearable:"","prefix-icon":"Search",style:{width:"300px","margin-right":"10px"},onInput:$},null,8,["modelValue"]),t(y,{type:"primary",onClick:K},{default:l(()=>e[13]||(e[13]=[s("新增服务器")])),_:1,__:[13]})])])]),default:l(()=>[t(Y,{data:M.value,style:{width:"100%"},border:"",stripe:"","highlight-current-row":""},{default:l(()=>[t(p,{prop:"id",label:"ID",width:"80"}),t(p,{prop:"name",label:"服务器名称","min-width":"150"}),t(p,{prop:"ip",label:"IP地址",width:"150"}),t(p,{prop:"type",label:"类型",width:"120"}),t(p,{prop:"os",label:"操作系统",width:"150"}),t(p,{prop:"cpu",label:"CPU使用率",width:"120"},{default:l(({row:a})=>[t(I,{percentage:a.cpu,status:j(a.cpu)},null,8,["percentage","status"])]),_:1}),t(p,{prop:"memory",label:"内存使用率",width:"120"},{default:l(({row:a})=>[t(I,{percentage:a.memory,status:E(a.memory)},null,8,["percentage","status"])]),_:1}),t(p,{prop:"status",label:"状态",width:"100"},{default:l(({row:a})=>[t(X,{type:A(a.status)},{default:l(()=>[s(c(a.status),1)]),_:2},1032,["type"])]),_:1}),t(p,{label:"操作",width:"220",fixed:"right"},{default:l(({row:a})=>[t(y,{type:"primary",size:"small",onClick:h=>Q(a)},{default:l(()=>e[14]||(e[14]=[s("查看")])),_:2,__:[14]},1032,["onClick"]),t(y,{type:"warning",size:"small",onClick:h=>N(a)},{default:l(()=>e[15]||(e[15]=[s("编辑")])),_:2,__:[15]},1032,["onClick"]),t(y,{type:"danger",size:"small",onClick:h=>T(a)},{default:l(()=>e[16]||(e[16]=[s("删除")])),_:2,__:[16]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),V("div",ie,[t(Z,{"current-page":v.value,"onUpdate:currentPage":e[1]||(e[1]=a=>v.value=a),"page-size":C.value,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:L.value.length,onSizeChange:B,onCurrentChange:W},null,8,["current-page","page-size","total"])])]),_:1}),t(P,{modelValue:b.value,"onUpdate:modelValue":e[10]||(e[10]=a=>b.value=a),title:S.value==="add"?"新增服务器":"编辑服务器",width:"500px"},{footer:l(()=>[V("span",re,[t(y,{onClick:e[9]||(e[9]=a=>b.value=!1)},{default:l(()=>e[17]||(e[17]=[s("取消")])),_:1,__:[17]}),t(y,{type:"primary",onClick:R},{default:l(()=>e[18]||(e[18]=[s("确定")])),_:1,__:[18]})])]),default:l(()=>[t(H,{model:u,rules:F,ref_key:"editFormRef",ref:w,"label-width":"100px"},{default:l(()=>[t(_,{label:"服务器名称",prop:"name"},{default:l(()=>[t(i,{modelValue:u.name,"onUpdate:modelValue":e[2]||(e[2]=a=>u.name=a)},null,8,["modelValue"])]),_:1}),t(_,{label:"IP地址",prop:"ip"},{default:l(()=>[t(i,{modelValue:u.ip,"onUpdate:modelValue":e[3]||(e[3]=a=>u.ip=a)},null,8,["modelValue"])]),_:1}),t(_,{label:"类型",prop:"type"},{default:l(()=>[t(O,{modelValue:u.type,"onUpdate:modelValue":e[4]||(e[4]=a=>u.type=a),placeholder:"请选择"},{default:l(()=>[t(x,{label:"物理服务器",value:"物理服务器"}),t(x,{label:"虚拟服务器",value:"虚拟服务器"})]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"操作系统",prop:"os"},{default:l(()=>[t(i,{modelValue:u.os,"onUpdate:modelValue":e[5]||(e[5]=a=>u.os=a)},null,8,["modelValue"])]),_:1}),t(_,{label:"CPU使用率",prop:"cpu"},{default:l(()=>[t(i,{modelValue:u.cpu,"onUpdate:modelValue":e[6]||(e[6]=a=>u.cpu=a),modelModifiers:{number:!0},type:"number",min:"0",max:"100"},null,8,["modelValue"])]),_:1}),t(_,{label:"内存使用率",prop:"memory"},{default:l(()=>[t(i,{modelValue:u.memory,"onUpdate:modelValue":e[7]||(e[7]=a=>u.memory=a),modelModifiers:{number:!0},type:"number",min:"0",max:"100"},null,8,["modelValue"])]),_:1}),t(_,{label:"状态",prop:"status"},{default:l(()=>[t(O,{modelValue:u.status,"onUpdate:modelValue":e[8]||(e[8]=a=>u.status=a),placeholder:"请选择"},{default:l(()=>[t(x,{label:"运行中",value:"运行中"}),t(x,{label:"已停止",value:"已停止"}),t(x,{label:"异常",value:"异常"}),t(x,{label:"维护中",value:"维护中"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(P,{modelValue:U.value,"onUpdate:modelValue":e[12]||(e[12]=a=>U.value=a),title:"服务器详情",width:"400px","show-close":!0},{footer:l(()=>[t(y,{onClick:e[11]||(e[11]=a=>U.value=!1)},{default:l(()=>e[19]||(e[19]=[s("关闭")])),_:1,__:[19]})]),default:l(()=>[t(J,{column:1,border:""},{default:l(()=>[t(g,{label:"服务器名称"},{default:l(()=>[s(c(d.name),1)]),_:1}),t(g,{label:"IP地址"},{default:l(()=>[s(c(d.ip),1)]),_:1}),t(g,{label:"类型"},{default:l(()=>[s(c(d.type),1)]),_:1}),t(g,{label:"操作系统"},{default:l(()=>[s(c(d.os),1)]),_:1}),t(g,{label:"CPU使用率"},{default:l(()=>[s(c(d.cpu)+"%",1)]),_:1}),t(g,{label:"内存使用率"},{default:l(()=>[s(c(d.memory)+"%",1)]),_:1}),t(g,{label:"状态"},{default:l(()=>[s(c(d.status),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),fe=ne(pe,[["__scopeId","data-v-91bef54d"]]);export{fe as default};
