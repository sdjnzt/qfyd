import{d as W,a as m,i as D,Z as U,e as ee,k as B,j as t,b as a,r as s,q as u,t as g,B as h,X as C,Y as te,o as ae}from"./vendor-BtSynzSy.js";import{_ as le}from"./index-CqRjJalX.js";const ne={class:"storage-container"},oe={class:"card-header"},se={class:"header-actions"},ue={class:"pagination-container"},de={class:"dialog-footer"},ie=W({__name:"index",setup(re){const b=m(""),y=m(1),x=m(10),r=m([{id:1,name:"主存储阵列A",type:"SAN",capacity:"50TB",used:"30TB",usedPercentage:60,location:"主机房",status:"正常"},{id:2,name:"主存储阵列B",type:"SAN",capacity:"50TB",used:"28TB",usedPercentage:56,location:"主机房",status:"正常"},{id:3,name:"备份存储A",type:"NAS",capacity:"30TB",used:"20TB",usedPercentage:67,location:"备份机房",status:"正常"},{id:4,name:"备份存储B",type:"NAS",capacity:"30TB",used:"22TB",usedPercentage:73,location:"备份机房",status:"警告"},{id:5,name:"归档存储",type:"Object Storage",capacity:"100TB",used:"65TB",usedPercentage:65,location:"数据中心",status:"正常"},{id:6,name:"分布式存储A",type:"分布式",capacity:"50TB",used:"22TB",usedPercentage:44,location:"主机房",status:"正常"},{id:7,name:"分布式存储B",type:"分布式",capacity:"50TB",used:"18TB",usedPercentage:36,location:"主机房",status:"正常"},{id:8,name:"教学资源存储",type:"NAS",capacity:"30TB",used:"25TB",usedPercentage:83,location:"主机房",status:"警告"},{id:9,name:"研究数据存储",type:"SAN",capacity:"40TB",used:"15TB",usedPercentage:38,location:"研究中心",status:"正常"},{id:10,name:"云备份存储",type:"Object Storage",capacity:"80TB",used:"50TB",usedPercentage:62,location:"云中心",status:"正常"}]),w=D(()=>b.value?r.value.filter(n=>n.name.includes(b.value)||n.type.includes(b.value)||n.location.includes(b.value)):r.value),z=D(()=>{const n=(y.value-1)*x.value;return w.value.slice(n,n+x.value)});function j(){y.value=1}function q(n){x.value=n,y.value=1}function O(n){y.value=n}const I=n=>n>80?"exception":n>60?"warning":"success",$=n=>{switch(n){case"正常":return"success";case"离线":return"info";case"错误":return"danger";case"警告":return"warning";default:return"info"}},V=m(!1),P=m("add"),o=U({id:0,name:"",type:"",capacity:"",used:"",usedPercentage:0,location:"",status:"正常"}),S=m(),E={name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],capacity:[{required:!0,message:"请输入总容量",trigger:"blur"}],used:[{required:!0,message:"请输入已用容量",trigger:"blur"}],usedPercentage:[{required:!0,type:"number",message:"请输入使用率",trigger:"blur"}],location:[{required:!0,message:"请输入位置",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]};function M(){P.value="add";const n=Math.max(...r.value.map(e=>e.id),0);Object.assign(o,{id:n+1,name:"",type:"",capacity:"",used:"",usedPercentage:0,location:"",status:"正常"}),V.value=!0,h(()=>{var e;return(e=S.value)==null?void 0:e.clearValidate()})}function F(n){P.value="edit",Object.assign(o,n),V.value=!0,h(()=>{var e;return(e=S.value)==null?void 0:e.clearValidate()})}function R(){S.value.validate(n=>{if(n){if(P.value==="add")r.value.unshift({...o}),C.success("新增成功");else{const e=r.value.findIndex(d=>d.id===o.id);e!==-1&&(r.value[e]={...o},C.success("编辑成功"))}V.value=!1}})}function Q(n){te.confirm(`确定要删除存储设备"${n.name}"吗？`,"删除确认",{type:"warning"}).then(()=>{const e=r.value.findIndex(d=>d.id===n.id);e!==-1&&(r.value.splice(e,1),C.success("删除成功"))}).catch(()=>{})}const T=m(!1),p=U({name:"",type:"",capacity:"",used:"",usedPercentage:0,location:"",status:""});function X(n){Object.assign(p,n),T.value=!0}return(n,e)=>{const d=s("el-input"),f=s("el-button"),i=s("el-table-column"),Y=s("el-progress"),Z=s("el-tag"),G=s("el-table"),H=s("el-pagination"),J=s("el-card"),_=s("el-form-item"),c=s("el-option"),k=s("el-select"),K=s("el-form"),A=s("el-dialog"),v=s("el-descriptions-item"),L=s("el-descriptions");return ae(),ee("div",ne,[e[20]||(e[20]=B("h1",null,"存储管理",-1)),t(J,{class:"storage-card"},{header:a(()=>[B("div",oe,[B("div",se,[t(d,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=l=>b.value=l),placeholder:"搜索存储设备（名称/类型/位置）...",clearable:"","prefix-icon":"Search",style:{width:"300px","margin-right":"10px"},onInput:j},null,8,["modelValue"]),t(f,{type:"primary",onClick:M},{default:a(()=>e[13]||(e[13]=[u("新增存储设备")])),_:1,__:[13]})])])]),default:a(()=>[t(G,{data:z.value,style:{width:"100%"},border:"",stripe:"","highlight-current-row":""},{default:a(()=>[t(i,{prop:"id",label:"ID",width:"80"}),t(i,{prop:"name",label:"设备名称","min-width":"150"}),t(i,{prop:"type",label:"类型",width:"120"}),t(i,{prop:"capacity",label:"总容量",width:"120"}),t(i,{prop:"used",label:"已用容量",width:"120"}),t(i,{prop:"usedPercentage",label:"使用率",width:"120"},{default:a(({row:l})=>[t(Y,{percentage:l.usedPercentage,status:I(l.usedPercentage),format:()=>l.usedPercentage+"%"},null,8,["percentage","status","format"])]),_:1}),t(i,{prop:"location",label:"位置",width:"150"}),t(i,{prop:"status",label:"状态",width:"100"},{default:a(({row:l})=>[t(Z,{type:$(l.status)},{default:a(()=>[u(g(l.status),1)]),_:2},1032,["type"])]),_:1}),t(i,{label:"操作",width:"220",fixed:"right"},{default:a(({row:l})=>[t(f,{type:"primary",size:"small",onClick:N=>X(l)},{default:a(()=>e[14]||(e[14]=[u("查看")])),_:2,__:[14]},1032,["onClick"]),t(f,{type:"warning",size:"small",onClick:N=>F(l)},{default:a(()=>e[15]||(e[15]=[u("编辑")])),_:2,__:[15]},1032,["onClick"]),t(f,{type:"danger",size:"small",onClick:N=>Q(l)},{default:a(()=>e[16]||(e[16]=[u("删除")])),_:2,__:[16]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),B("div",ue,[t(H,{"current-page":y.value,"onUpdate:currentPage":e[1]||(e[1]=l=>y.value=l),"page-size":x.value,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:w.value.length,onSizeChange:q,onCurrentChange:O},null,8,["current-page","page-size","total"])])]),_:1}),t(A,{modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=l=>V.value=l),title:P.value==="add"?"新增存储设备":"编辑存储设备",width:"500px"},{footer:a(()=>[B("span",de,[t(f,{onClick:e[9]||(e[9]=l=>V.value=!1)},{default:a(()=>e[17]||(e[17]=[u("取消")])),_:1,__:[17]}),t(f,{type:"primary",onClick:R},{default:a(()=>e[18]||(e[18]=[u("确定")])),_:1,__:[18]})])]),default:a(()=>[t(K,{model:o,rules:E,ref_key:"editFormRef",ref:S,"label-width":"100px"},{default:a(()=>[t(_,{label:"设备名称",prop:"name"},{default:a(()=>[t(d,{modelValue:o.name,"onUpdate:modelValue":e[2]||(e[2]=l=>o.name=l)},null,8,["modelValue"])]),_:1}),t(_,{label:"类型",prop:"type"},{default:a(()=>[t(k,{modelValue:o.type,"onUpdate:modelValue":e[3]||(e[3]=l=>o.type=l),placeholder:"请选择"},{default:a(()=>[t(c,{label:"SAN",value:"SAN"}),t(c,{label:"NAS",value:"NAS"}),t(c,{label:"Object Storage",value:"Object Storage"}),t(c,{label:"分布式",value:"分布式"})]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"总容量",prop:"capacity"},{default:a(()=>[t(d,{modelValue:o.capacity,"onUpdate:modelValue":e[4]||(e[4]=l=>o.capacity=l)},null,8,["modelValue"])]),_:1}),t(_,{label:"已用容量(%)",prop:"usedPercentage"},{default:a(()=>[t(d,{modelValue:o.usedPercentage,"onUpdate:modelValue":e[5]||(e[5]=l=>o.usedPercentage=l),modelModifiers:{number:!0},type:"number",min:"0",max:"100"},null,8,["modelValue"])]),_:1}),t(_,{label:"已用容量",prop:"used"},{default:a(()=>[t(d,{modelValue:o.used,"onUpdate:modelValue":e[6]||(e[6]=l=>o.used=l)},null,8,["modelValue"])]),_:1}),t(_,{label:"位置",prop:"location"},{default:a(()=>[t(d,{modelValue:o.location,"onUpdate:modelValue":e[7]||(e[7]=l=>o.location=l)},null,8,["modelValue"])]),_:1}),t(_,{label:"状态",prop:"status"},{default:a(()=>[t(k,{modelValue:o.status,"onUpdate:modelValue":e[8]||(e[8]=l=>o.status=l),placeholder:"请选择"},{default:a(()=>[t(c,{label:"正常",value:"正常"}),t(c,{label:"离线",value:"离线"}),t(c,{label:"错误",value:"错误"}),t(c,{label:"警告",value:"警告"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(A,{modelValue:T.value,"onUpdate:modelValue":e[12]||(e[12]=l=>T.value=l),title:"存储设备详情",width:"400px","show-close":!0},{footer:a(()=>[t(f,{onClick:e[11]||(e[11]=l=>T.value=!1)},{default:a(()=>e[19]||(e[19]=[u("关闭")])),_:1,__:[19]})]),default:a(()=>[t(L,{column:1,border:""},{default:a(()=>[t(v,{label:"设备名称"},{default:a(()=>[u(g(p.name),1)]),_:1}),t(v,{label:"类型"},{default:a(()=>[u(g(p.type),1)]),_:1}),t(v,{label:"总容量"},{default:a(()=>[u(g(p.capacity),1)]),_:1}),t(v,{label:"已用容量"},{default:a(()=>[u(g(p.used),1)]),_:1}),t(v,{label:"使用率"},{default:a(()=>[u(g(p.usedPercentage)+"%",1)]),_:1}),t(v,{label:"位置"},{default:a(()=>[u(g(p.location),1)]),_:1}),t(v,{label:"状态"},{default:a(()=>[u(g(p.status),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),me=le(ie,[["__scopeId","data-v-b279549d"]]);export{me as default};
