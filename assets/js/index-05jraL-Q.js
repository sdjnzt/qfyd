import{d as ce,a as v,i as R,Z as j,w as pe,e as E,k as r,j as t,b as l,r as i,q as n,t as d,m as ve,a8 as me,aa as fe,X as g,Y as G,o as L}from"./vendor-BCCqDdhU.js";import{_ as _e}from"./index-CBMaVkck.js";const ge={class:"alarms-container"},be={class:"card-header"},ye={class:"header-left"},xe={class:"header-right"},Ve={class:"filter-container"},Ce={class:"filter-actions"},we={class:"pagination-container"},he={key:0,class:"process-info"},ke={class:"dialog-footer"},Te={class:"dialog-footer"},De=ce({__name:"index",setup(Ne){const V=v(""),_=v(1),D=v(20),C=v(""),w=v(""),b=v([]),N=v([]),u=v([{id:1,level:"严重",content:"教学资源存储空间使用率达到88%，请及时清理",source:"存储监控",time:"2023-06-10 14:25:30",status:"未处理",detail:'存储设备"教学资源存储"剩余空间不足3TB，可能影响系统正常运行。',suggestion:"清理临时文件和过期数据，或者扩容存储设备。"},{id:2,level:"警告",content:"教学楼交换机A带宽使用率超过85%，可能影响网络访问速度",source:"网络监控",time:"2023-06-10 13:45:12",status:"未处理",detail:"教学楼交换机A上行链路带宽使用率持续15分钟超过85%，下行链路正常。",suggestion:"检查是否有大量数据上传任务，必要时增加带宽或分流业务。"},{id:3,level:"警告",content:"资源管理系统响应时间超过2秒，建议检查系统负载",source:"应用监控",time:"2023-06-10 13:20:05",status:"已处理",detail:"资源管理系统平均响应时间为2.5秒，超过警告阈值2秒。",suggestion:"检查系统负载情况，必要时进行资源扩容或优化SQL查询。",processor:"张工",processTime:"2023-06-10 14:30:15",processNote:"已重启应用服务，恢复正常"},{id:4,level:"提示",content:"服务器计划性维护将于今晚23:00进行，预计持续2小时",source:"系统通知",time:"2023-06-10 12:10:56",status:"未处理",detail:"计划对主要服务器进行系统更新和安全补丁安装，预计维护时间为23:00-01:00。",suggestion:"请相关人员提前做好数据备份和应用下线准备。"},{id:5,level:"严重",content:"资源管理服务器CPU使用率持续超过85%，建议立即检查",source:"服务器监控",time:"2023-06-10 11:50:23",status:"未处理",detail:'服务器"资源管理服务器"CPU使用率持续30分钟超过85%，内存使用率75%。',suggestion:"检查是否有异常进程占用资源，必要时重启服务或增加资源配置。"},{id:6,level:"警告",content:"学生管理系统数据库连接池接近饱和，当前使用率92%",source:"应用监控",time:"2023-06-10 10:15:42",status:"已处理",detail:"学生管理系统数据库连接池最大连接数100，当前已使用92个连接。",suggestion:"检查是否存在连接泄漏，或增加连接池最大连接数。",processor:"李工",processTime:"2023-06-10 10:45:20",processNote:"已优化连接池配置，释放空闲连接"},{id:7,level:"严重",content:"主防火墙检测到疑似DDoS攻击，已触发自动防护",source:"安全监控",time:"2023-06-10 09:30:15",status:"未处理",detail:"主防火墙检测到大量SYN请求，IP来源分散，疑似DDoS攻击。",suggestion:"检查网络流量情况，必要时联系网络服务提供商增加防护措施。"},{id:8,level:"提示",content:"系统备份任务已完成，备份大小25GB",source:"备份系统",time:"2023-06-10 08:00:00",status:"已处理",detail:"每日系统备份任务正常完成，备份文件已存储至备份存储设备。",suggestion:"定期检查备份文件完整性，并进行恢复测试。",processor:"系统自动",processTime:"2023-06-10 08:00:05",processNote:"自动完成"},{id:9,level:"警告",content:"存储系统RAID降级，硬盘3疑似故障",source:"存储监控",time:"2023-06-09 22:10:35",status:"未处理",detail:"RAID5阵列中硬盘3读取错误率增加，可能即将故障。",suggestion:"尽快替换可能故障的硬盘，避免数据丢失。"},{id:10,level:"警告",content:"备份存储B使用率达到73%，超过预警阈值",source:"存储监控",time:"2023-06-09 20:45:12",status:"未处理",detail:"备份存储B总容量30TB，已使用22TB，使用率73%。",suggestion:"清理过期备份数据，或规划存储扩容。"},{id:11,level:"提示",content:"系统自动更新已完成，所有安全补丁已安装",source:"系统通知",time:"2023-06-09 18:30:00",status:"已处理",detail:"系统自动更新包含10个安全补丁和5个功能更新。",suggestion:"无需操作，系统已处于最新状态。",processor:"系统自动",processTime:"2023-06-09 18:30:10",processNote:"自动完成"},{id:12,level:"严重",content:"数据库主从同步中断，需要手动干预",source:"数据库监控",time:"2023-06-09 16:20:45",status:"已处理",detail:"主从数据库同步延迟超过30分钟，可能存在数据不一致。",suggestion:"检查主从同步状态，修复同步问题，必要时重建从库。",processor:"王工",processTime:"2023-06-09 17:15:30",processNote:"已修复主从同步配置，恢复正常"},{id:13,level:"警告",content:"无线AP-3F离线，可能影响教学楼3楼网络使用",source:"网络监控",time:"2023-06-09 15:10:22",status:"未处理",detail:"无线AP-3F已离线超过10分钟，Ping不通。",suggestion:"检查设备电源和网络连接，必要时重启或更换设备。"},{id:14,level:"警告",content:"系统日志空间不足，当前剩余10%",source:"系统监控",time:"2023-06-09 14:05:18",status:"未处理",detail:"系统日志分区总容量50GB，剩余5GB，即将耗尽。",suggestion:"清理过期日志文件，或增加日志分区容量。"},{id:15,level:"提示",content:"新版本教务管理系统已发布，可以升级",source:"系统通知",time:"2023-06-09 12:00:00",status:"未处理",detail:"教务管理系统v2.5已发布，包含新功能和bug修复。",suggestion:"在维护时间窗口进行系统升级，升级前请备份数据。"}]),I=R(()=>{let s=u.value;if(V.value&&(s=s.filter(e=>e.content.includes(V.value)||e.source.includes(V.value))),C.value&&(s=s.filter(e=>e.level===C.value)),w.value&&(s=s.filter(e=>e.source===w.value)),b.value&&b.value.length===2){const e=b.value[0],m=b.value[1];e&&m&&(s=s.filter(T=>{const c=new Date(T.time);return c>=e&&c<=m}))}return s}),M=R(()=>{const s=(_.value-1)*D.value;return I.value.slice(s,s+D.value)}),h=v(!1),o=j({id:0,level:"",content:"",source:"",time:"",status:"",detail:"",suggestion:"",processor:"",processTime:"",processNote:""}),k=v(!1),B=v(0),p=j({processor:"",note:""}),U=s=>{switch(s){case"严重":return"danger";case"警告":return"warning";case"提示":return"info";default:return"info"}};function Q(){_.value=1}function Y(s){D.value=s,_.value=1}function q(s){_.value=s}function O(s){N.value=s}function X(){g.success("告警数据已刷新")}function Z(s){Object.assign(o,s),h.value=!0}function H(s){if(s.status==="已处理"){const e=u.value.findIndex(m=>m.id===s.id);e!==-1&&(u.value[e].status="未处理",u.value[e].processor=void 0,u.value[e].processTime=void 0,u.value[e].processNote=void 0,g.success("已取消处理标记"))}else B.value=s.id,p.processor="",p.note="",k.value=!0}function J(){if(o.status==="已处理"){const s=u.value.findIndex(e=>e.id===o.id);s!==-1&&(u.value[s].status="未处理",u.value[s].processor=void 0,u.value[s].processTime=void 0,u.value[s].processNote=void 0,o.status="未处理",o.processor="",o.processTime="",o.processNote="",g.success("已取消处理标记"))}else B.value=o.id,p.processor="",p.note="",k.value=!0}function K(){const s=new Date().toLocaleString(),e=u.value.findIndex(m=>m.id===B.value);e!==-1&&(u.value[e].status="已处理",u.value[e].processor=p.processor||"管理员",u.value[e].processTime=s,u.value[e].processNote=p.note||"无备注",o.id===B.value&&(o.status="已处理",o.processor=p.processor||"管理员",o.processTime=s,o.processNote=p.note||"无备注"),g.success("告警已标记为已处理"),k.value=!1)}function W(s){G.confirm("确认清除此告警记录？此操作不可撤销！","确认清除",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=u.value.findIndex(m=>m.id===s.id);e!==-1&&(u.value.splice(e,1),g.success("告警已清除"),o.id===s.id&&(h.value=!1))}).catch(()=>{})}function ee(){if(N.value.length===0){g.warning("请先选择要清除的告警");return}G.confirm(`确认清除选中的${N.value.length}条告警记录？此操作不可撤销！`,"批量清除",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{const s=N.value.map(e=>e.id);u.value=u.value.filter(e=>!s.includes(e.id)),g.success(`已清除${s.length}条告警`),s.includes(o.id)&&(h.value=!1)}).catch(()=>{})}function te(){_.value=1,g.success("筛选条件已应用")}function le(){V.value="",C.value="",w.value="",b.value=[],_.value=1,g.success("筛选条件已重置")}return pe([V,C,w,b],()=>{_.value=1}),(s,e)=>{const m=i("el-icon"),T=i("el-input"),c=i("el-button"),f=i("el-option"),z=i("el-select"),A=i("el-col"),se=i("el-date-picker"),oe=i("el-row"),y=i("el-table-column"),S=i("el-tag"),ae=i("el-button-group"),ne=i("el-table"),ue=i("el-pagination"),ie=i("el-card"),x=i("el-descriptions-item"),re=i("el-descriptions"),P=i("el-dialog"),F=i("el-form-item"),de=i("el-form");return L(),E("div",ge,[e[25]||(e[25]=r("h1",null,"告警中心",-1)),t(ie,{class:"alarm-card",shadow:"hover"},{header:l(()=>[r("div",be,[r("div",ye,[t(m,null,{default:l(()=>[t(ve(me))]),_:1}),e[11]||(e[11]=r("span",null,"告警管理",-1))]),r("div",xe,[t(T,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),placeholder:"搜索告警信息...",clearable:"","prefix-icon":"Search",style:{width:"300px","margin-right":"10px"},onInput:Q},null,8,["modelValue"]),t(c,{type:"primary",onClick:X},{default:l(()=>e[12]||(e[12]=[n("刷新")])),_:1,__:[12]}),t(c,{type:"danger",onClick:ee},{default:l(()=>e[13]||(e[13]=[n("批量清除")])),_:1,__:[13]})])])]),default:l(()=>[r("div",Ve,[t(oe,{gutter:20},{default:l(()=>[t(A,{xs:24,sm:8,md:6},{default:l(()=>[t(z,{modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=a=>C.value=a),placeholder:"告警级别",clearable:"",style:{width:"100%"}},{default:l(()=>[t(f,{label:"全部级别",value:""}),t(f,{label:"严重",value:"严重"}),t(f,{label:"警告",value:"警告"}),t(f,{label:"提示",value:"提示"})]),_:1},8,["modelValue"])]),_:1}),t(A,{xs:24,sm:8,md:6},{default:l(()=>[t(z,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=a=>w.value=a),placeholder:"告警来源",clearable:"",style:{width:"100%"}},{default:l(()=>[t(f,{label:"全部来源",value:""}),t(f,{label:"服务器监控",value:"服务器监控"}),t(f,{label:"网络监控",value:"网络监控"}),t(f,{label:"存储监控",value:"存储监控"}),t(f,{label:"应用监控",value:"应用监控"}),t(f,{label:"系统通知",value:"系统通知"})]),_:1},8,["modelValue"])]),_:1}),t(A,{xs:24,sm:8,md:6},{default:l(()=>[t(se,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=a=>b.value=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(A,{xs:24,sm:24,md:6},{default:l(()=>[r("div",Ce,[t(c,{type:"primary",onClick:te},{default:l(()=>e[14]||(e[14]=[n("应用筛选")])),_:1,__:[14]}),t(c,{onClick:le},{default:l(()=>e[15]||(e[15]=[n("重置")])),_:1,__:[15]})])]),_:1})]),_:1})]),t(ne,{data:M.value,style:{width:"100%","margin-top":"20px"},border:"",stripe:"","highlight-current-row":"",onSelectionChange:O},{default:l(()=>[t(y,{type:"selection",width:"55"}),t(y,{prop:"id",label:"ID",width:"80"}),t(y,{prop:"level",label:"级别",width:"100"},{default:l(({row:a})=>[t(S,{type:U(a.level),effect:"dark"},{default:l(()=>[n(d(a.level),1)]),_:2},1032,["type"])]),_:1}),t(y,{prop:"content",label:"告警内容","min-width":"300","show-overflow-tooltip":""}),t(y,{prop:"source",label:"来源",width:"120"}),t(y,{prop:"time",label:"时间",width:"180",sortable:""}),t(y,{prop:"status",label:"状态",width:"100"},{default:l(({row:a})=>[t(S,{type:a.status==="已处理"?"success":"info",effect:"plain"},{default:l(()=>[n(d(a.status),1)]),_:2},1032,["type"])]),_:1}),t(y,{label:"操作",width:"220",fixed:"right"},{default:l(({row:a})=>[t(ae,null,{default:l(()=>[t(c,{type:"primary",size:"small",onClick:$=>Z(a)},{default:l(()=>e[16]||(e[16]=[n("详情")])),_:2,__:[16]},1032,["onClick"]),t(c,{type:a.status==="已处理"?"warning":"success",size:"small",onClick:$=>H(a)},{default:l(()=>[n(d(a.status==="已处理"?"取消处理":"标记处理"),1)]),_:2},1032,["type","onClick"]),t(c,{type:"danger",size:"small",onClick:$=>W(a)},{default:l(()=>e[17]||(e[17]=[n("清除")])),_:2,__:[17]},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),r("div",we,[t(ue,{"current-page":_.value,"onUpdate:currentPage":e[4]||(e[4]=a=>_.value=a),"page-size":D.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:I.value.length,onSizeChange:Y,onCurrentChange:q},null,8,["current-page","page-size","total"])])]),_:1}),t(P,{modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=a=>h.value=a),title:"告警详情",width:"600px"},{footer:l(()=>[r("span",ke,[t(c,{onClick:e[5]||(e[5]=a=>h.value=!1)},{default:l(()=>e[22]||(e[22]=[n("关闭")])),_:1,__:[22]}),t(c,{type:o.status==="已处理"?"warning":"success",onClick:J},{default:l(()=>[n(d(o.status==="已处理"?"取消处理":"标记处理"),1)]),_:1},8,["type"])])]),default:l(()=>[t(re,{column:2,border:""},{default:l(()=>[t(x,{label:"告警ID",span:2},{default:l(()=>[n(d(o.id),1)]),_:1}),t(x,{label:"告警级别"},{default:l(()=>[t(S,{type:U(o.level),effect:"dark"},{default:l(()=>[n(d(o.level),1)]),_:1},8,["type"])]),_:1}),t(x,{label:"告警状态"},{default:l(()=>[t(S,{type:o.status==="已处理"?"success":"info",effect:"plain"},{default:l(()=>[n(d(o.status),1)]),_:1},8,["type"])]),_:1}),t(x,{label:"告警来源"},{default:l(()=>[n(d(o.source),1)]),_:1}),t(x,{label:"发生时间"},{default:l(()=>[n(d(o.time),1)]),_:1}),t(x,{label:"告警内容",span:2},{default:l(()=>[n(d(o.content),1)]),_:1}),t(x,{label:"详细信息",span:2},{default:l(()=>[n(d(o.detail||"无详细信息"),1)]),_:1}),t(x,{label:"建议处理方法",span:2},{default:l(()=>[n(d(o.suggestion||"无处理建议"),1)]),_:1})]),_:1}),o.status==="已处理"?(L(),E("div",he,[e[21]||(e[21]=r("h4",null,"处理记录",-1)),r("p",null,[e[18]||(e[18]=r("strong",null,"处理人：",-1)),n(d(o.processor||"系统自动"),1)]),r("p",null,[e[19]||(e[19]=r("strong",null,"处理时间：",-1)),n(d(o.processTime||"-"),1)]),r("p",null,[e[20]||(e[20]=r("strong",null,"处理备注：",-1)),n(d(o.processNote||"无备注"),1)])])):fe("",!0)]),_:1},8,["modelValue"]),t(P,{modelValue:k.value,"onUpdate:modelValue":e[10]||(e[10]=a=>k.value=a),title:"标记处理",width:"400px"},{footer:l(()=>[r("span",Te,[t(c,{onClick:e[9]||(e[9]=a=>k.value=!1)},{default:l(()=>e[23]||(e[23]=[n("取消")])),_:1,__:[23]}),t(c,{type:"primary",onClick:K},{default:l(()=>e[24]||(e[24]=[n("确认")])),_:1,__:[24]})])]),default:l(()=>[t(de,{model:p,"label-width":"100px"},{default:l(()=>[t(F,{label:"处理人"},{default:l(()=>[t(T,{modelValue:p.processor,"onUpdate:modelValue":e[7]||(e[7]=a=>p.processor=a),placeholder:"请输入处理人姓名"},null,8,["modelValue"])]),_:1}),t(F,{label:"处理备注"},{default:l(()=>[t(T,{modelValue:p.note,"onUpdate:modelValue":e[8]||(e[8]=a=>p.note=a),type:"textarea",rows:3,placeholder:"请输入处理备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Se=_e(De,[["__scopeId","data-v-498052d9"]]);export{Se as default};
