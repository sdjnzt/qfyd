import{d as fe,a as c,Z as he,z as ve,B as be,A as ge,w as ye,C as R,X as w,e as A,j as e,b as t,r,F,f as N,k as l,m as _,D as we,q as i,P as W,t as d,x as ke,V as Ce,a7 as xe,K as M,S as Be,a8 as De,Y as T,g as Te,o as k,c as V,n as Se}from"./vendor-CgAfaZZC.js";import{_ as ze}from"./index-BrFT0OYg.js";const Le={class:"cloud-management-container"},$e={class:"card-header"},Ae={class:"header-left"},Me={class:"header-right"},Ve={class:"item-icon"},Ee={class:"item-content"},Pe={class:"item-title"},Ue={class:"item-count"},Oe={class:"item-desc"},Re={class:"card-header"},Fe={class:"header-left"},Ne={class:"header-right"},We={class:"card-header"},je={class:"header-left"},qe={class:"card-header"},Ke={class:"header-left"},Xe={class:"card-header"},Ye={class:"header-left"},Ze={class:"header-right"},Ge={class:"last-update"},He={class:"card-header"},Je={class:"header-left"},Qe={class:"header-right"},Ie={class:"alarm-content"},et={class:"alarm-source"},tt=fe({__name:"index",setup(at){const j=Te(),x=c("day"),E=c("server"),q=c([{title:"教学管理平台",count:"4/4",description:"全部正常运行",icon:"Reading",status:"normal"},{title:"网络设备",count:"48/50",description:"已监控48台设备",icon:"Connection",status:"warning"},{title:"服务器",count:"30/30",description:"已监控全部服务器",icon:"Cpu",status:"normal"},{title:"存储设备",count:"19/20",description:"已监控19台设备",icon:"DataLine",status:"warning"}]),K=c([{name:"教学管理平台许可",type:"平台",total:4,used:4,available:0,expireDate:"2025-12-31",status:"有效"},{name:"网络设备管理许可",type:"设备",total:50,used:48,available:2,expireDate:"2025-12-31",status:"有效"},{name:"服务器管理许可",type:"设备",total:30,used:30,available:0,expireDate:"2025-12-31",status:"有效"},{name:"存储管理许可",type:"设备",total:20,used:19,available:1,expireDate:"2025-12-31",status:"有效"}]),X=c([{name:"教务系统服务器",status:"正常",cpu:65,memory:70,disk:55,lastCheck:"2025-06-10 15:30:45"},{name:"学生管理服务器",status:"正常",cpu:55,memory:60,disk:48,lastCheck:"2025-06-10 15:30:42"},{name:"教师管理服务器",status:"正常",cpu:45,memory:52,disk:60,lastCheck:"2025-06-10 15:30:40"},{name:"资源管理服务器",status:"警告",cpu:85,memory:75,disk:68,lastCheck:"2025-06-10 15:30:38"},{name:"虚拟化平台主机",status:"正常",cpu:60,memory:65,disk:50,lastCheck:"2025-06-10 15:30:35"}]),Y=c([{name:"核心路由器",status:"正常",bandwidth:65,packets:"15000",errors:.2,lastCheck:"2025-06-10 15:30:45"},{name:"主防火墙",status:"正常",bandwidth:60,packets:"12000",errors:.1,lastCheck:"2025-06-10 15:30:42"},{name:"教学楼交换机A",status:"警告",bandwidth:85,packets:"8500",errors:1.5,lastCheck:"2025-06-10 15:30:40"},{name:"教学楼交换机B",status:"正常",bandwidth:55,packets:"7200",errors:.3,lastCheck:"2025-06-10 15:30:38"},{name:"办公楼交换机",status:"正常",bandwidth:45,packets:"5000",errors:.2,lastCheck:"2025-06-10 15:30:35"}]),Z=c([{name:"主存储阵列",status:"正常",capacity:"50TB",usage:68,iops:"1200",latency:"5ms",lastCheck:"2025-06-10 15:30:45"},{name:"备份存储",status:"正常",capacity:"30TB",usage:55,iops:"800",latency:"8ms",lastCheck:"2025-06-10 15:30:42"},{name:"教学资源存储",status:"警告",capacity:"20TB",usage:88,iops:"950",latency:"10ms",lastCheck:"2025-06-10 15:30:40"},{name:"数据归档存储",status:"正常",capacity:"40TB",usage:45,iops:"300",latency:"12ms",lastCheck:"2025-06-10 15:30:38"},{name:"视频资源存储",status:"正常",capacity:"25TB",usage:72,iops:"850",latency:"7ms",lastCheck:"2025-06-10 15:30:35"}]),G=c([{name:"教务管理系统",status:"正常",users:120,response:"0.5s",load:65,lastCheck:"2025-06-10 15:30:45"},{name:"学生管理系统",status:"正常",users:85,response:"0.8s",load:55,lastCheck:"2025-06-10 15:30:42"},{name:"教师管理系统",status:"正常",users:42,response:"0.6s",load:40,lastCheck:"2025-06-10 15:30:40"},{name:"资源管理系统",status:"警告",users:68,response:"2.5s",load:85,lastCheck:"2025-06-10 15:30:38"}]),H=c([{level:"严重",content:"教学资源存储空间使用率达到88%，请及时清理",source:"存储监控",time:"2025-06-10 14:25:30"},{level:"警告",content:"教学楼交换机A带宽使用率超过85%，可能影响网络访问速度",source:"网络监控",time:"2025-06-10 13:45:12"},{level:"警告",content:"资源管理系统响应时间超过2秒，建议检查系统负载",source:"应用监控",time:"2025-06-10 13:20:05"},{level:"提示",content:"服务器计划性维护将于今晚23:00进行，预计持续2小时",source:"系统通知",time:"2025-06-10 12:10:56"},{level:"严重",content:"资源管理服务器CPU使用率持续超过85%，建议立即检查",source:"服务器监控",time:"2025-06-10 11:50:23"}]),S=c(null),z=c(null);let p=null,m=null;const J=he({day:{servers:[25,3,1,1],network:[40,6,2,2],storage:[16,3,0,1],education:[4,0,0,0]},week:{servers:[22,5,2,1],network:[38,8,3,1],storage:[15,4,1,0],education:[3,1,0,0]},month:{servers:[20,6,3,1],network:[35,10,3,2],storage:[14,5,1,0],education:[3,1,0,0]}});ve(()=>{be(()=>{Q(),window.addEventListener("resize",P)})}),ge(()=>{window.removeEventListener("resize",P),p==null||p.dispose(),m==null||m.dispose()});function P(){p==null||p.resize(),m==null||m.resize()}ye(x,o=>{U(o)},{immediate:!1});function Q(){if(S.value&&(p=R(S.value),U(x.value)),z.value){m=R(z.value);const o={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",data:["服务器","网络设备","存储设备","教学系统","其他"]},series:[{name:"设备分布",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:30,name:"服务器"},{value:50,name:"网络设备"},{value:20,name:"存储设备"},{value:4,name:"教学系统"},{value:8,name:"其他"}]}]};m.setOption(o)}}function U(o){if(!p)return;const s=J[o],u={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["正常","警告","严重","离线"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:["服务器","网络设备","存储设备","教学系统"]},yAxis:{type:"value"},series:[{name:"正常",type:"bar",stack:"total",emphasis:{focus:"series"},data:[s.servers[0],s.network[0],s.storage[0],s.education[0]],itemStyle:{color:"#67C23A"}},{name:"警告",type:"bar",stack:"total",emphasis:{focus:"series"},data:[s.servers[1],s.network[1],s.storage[1],s.education[1]],itemStyle:{color:"#E6A23C"}},{name:"严重",type:"bar",stack:"total",emphasis:{focus:"series"},data:[s.servers[2],s.network[2],s.storage[2],s.education[2]],itemStyle:{color:"#F56C6C"}},{name:"离线",type:"bar",stack:"total",emphasis:{focus:"series"},data:[s.servers[3],s.network[3],s.storage[3],s.education[3]],itemStyle:{color:"#909399"}}]};p.setOption(u),w.success(`已切换到${o==="day"?"今日":o==="week"?"本周":"本月"}数据`)}const I=o=>`${o.toLocaleDateString()} ${o.toLocaleTimeString()}`,ee=(o,s)=>{const u=o/s*100;return u>90?"exception":u>70?"warning":"success"},B=o=>{switch(o){case"正常":return"success";case"警告":return"warning";case"严重":return"danger";case"离线":return"info";default:return"info"}},v=o=>o>80?"exception":o>60?"warning":"success",te=o=>{switch(o){case"严重":return"danger";case"警告":return"warning";case"提示":return"info";default:return"info"}};function ae(){w.success("仪表盘数据已刷新")}function se(){w.success("监控数据已刷新")}function le(){T.prompt("请输入许可证密钥","添加许可",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:o})=>{w({type:"success",message:`已添加许可证密钥: ${o}`})}).catch(()=>{})}function ne(o){T.alert(`许可证详情: ${o.name}`,"许可详情",{confirmButtonText:"确定"})}function oe(o){T.confirm(`确认为"${o.name}"续期?`,"续期确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{w({type:"success",message:"许可已成功续期至2026-12-31"})}).catch(()=>{})}function re(o){T.confirm(`确认删除"${o.name}"?`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{w({type:"success",message:"许可已成功删除"})}).catch(()=>{})}function ie(){j.push("/alarms")}return(o,s)=>{const u=r("el-icon"),b=r("el-tag"),f=r("el-button"),L=r("el-col"),O=r("el-row"),g=r("el-card"),n=r("el-table-column"),h=r("el-progress"),de=r("el-button-group"),C=r("el-table"),$=r("el-radio-button"),ue=r("el-radio-group"),D=r("el-tab-pane"),ce=r("el-tabs"),pe=r("el-badge"),me=r("el-timeline-item"),_e=r("el-timeline");return k(),A("div",Le,[e(g,{class:"overview-card",shadow:"hover"},{header:t(()=>[l("div",$e,[l("div",Ae,[e(u,null,{default:t(()=>[e(_(we))]),_:1}),s[2]||(s[2]=l("span",null,"云管平台概览",-1))]),l("div",Me,[e(b,{type:"success"},{default:t(()=>s[3]||(s[3]=[i("cSight 管理平台")])),_:1,__:[3]}),e(f,{type:"primary",size:"small",icon:_(W),onClick:ae},{default:t(()=>s[4]||(s[4]=[i("刷新")])),_:1,__:[4]},8,["icon"])])])]),default:t(()=>[e(O,{gutter:20},{default:t(()=>[(k(!0),A(F,null,N(q.value,(a,y)=>(k(),V(L,{xs:24,sm:12,md:6,key:y},{default:t(()=>[l("div",{class:M(["overview-item",`status-${a.status}`])},[l("div",Ve,[e(u,null,{default:t(()=>[(k(),V(Se(a.icon)))]),_:2},1024)]),l("div",Ee,[l("div",Pe,d(a.title),1),l("div",Ue,d(a.count),1),l("div",Oe,d(a.description),1)])],2)]),_:2},1024))),128))]),_:1})]),_:1}),e(g,{class:"license-card",shadow:"hover"},{header:t(()=>[l("div",Re,[l("div",Fe,[e(u,null,{default:t(()=>[e(_(ke))]),_:1}),s[5]||(s[5]=l("span",null,"许可管理",-1))]),l("div",Ne,[e(f,{type:"primary",size:"small",onClick:le},{default:t(()=>s[6]||(s[6]=[i("添加许可")])),_:1,__:[6]})])])]),default:t(()=>[e(C,{data:K.value,style:{width:"100%"},border:"",stripe:""},{default:t(()=>[e(n,{prop:"name",label:"许可名称","min-width":"150"}),e(n,{prop:"type",label:"许可类型",width:"120"}),e(n,{prop:"total",label:"许可数量",width:"100"}),e(n,{prop:"used",label:"已使用",width:"100"}),e(n,{prop:"available",label:"可用",width:"100"}),e(n,{prop:"expireDate",label:"到期日期",width:"120"}),e(n,{label:"使用情况",width:"180"},{default:t(({row:a})=>[e(h,{percentage:Math.round(a.used/a.total*100),status:ee(a.used,a.total)},null,8,["percentage","status"])]),_:1}),e(n,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(b,{type:a.status==="有效"?"success":"danger"},{default:t(()=>[i(d(a.status),1)]),_:2},1032,["type"])]),_:1}),e(n,{label:"操作",width:"180",fixed:"right"},{default:t(({row:a})=>[e(de,null,{default:t(()=>[e(f,{type:"primary",size:"small",onClick:y=>ne(a)},{default:t(()=>s[7]||(s[7]=[i("详情")])),_:2,__:[7]},1032,["onClick"]),e(f,{type:"warning",size:"small",onClick:y=>oe(a)},{default:t(()=>s[8]||(s[8]=[i("续期")])),_:2,__:[8]},1032,["onClick"]),e(f,{type:"danger",size:"small",onClick:y=>re(a)},{default:t(()=>s[9]||(s[9]=[i("删除")])),_:2,__:[9]},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),e(O,{gutter:20,class:"device-stats-row"},{default:t(()=>[e(L,{xs:24,md:12},{default:t(()=>[e(g,{class:"device-stats-card",shadow:"hover"},{header:t(()=>[l("div",We,[l("div",je,[e(u,null,{default:t(()=>[e(_(Ce))]),_:1}),s[10]||(s[10]=l("span",null,"设备监控统计",-1))]),e(ue,{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=a=>x.value=a),size:"small"},{default:t(()=>[e($,{label:"day"},{default:t(()=>s[11]||(s[11]=[i("今日")])),_:1,__:[11]}),e($,{label:"week"},{default:t(()=>s[12]||(s[12]=[i("本周")])),_:1,__:[12]}),e($,{label:"month"},{default:t(()=>s[13]||(s[13]=[i("本月")])),_:1,__:[13]})]),_:1},8,["modelValue"])])]),default:t(()=>[l("div",{ref_key:"deviceStatsChart",ref:S,class:"chart-container",id:"deviceStatsChart"},null,512)]),_:1})]),_:1}),e(L,{xs:24,md:12},{default:t(()=>[e(g,{class:"device-category-card",shadow:"hover"},{header:t(()=>[l("div",qe,[l("div",Ke,[e(u,null,{default:t(()=>[e(_(xe))]),_:1}),s[14]||(s[14]=l("span",null,"设备类型分布",-1))])])]),default:t(()=>[l("div",{ref_key:"deviceCategoryChart",ref:z,class:"chart-container",id:"deviceCategoryChart"},null,512)]),_:1})]),_:1})]),_:1}),e(g,{class:"platform-monitoring",shadow:"hover"},{header:t(()=>[l("div",Xe,[l("div",Ye,[e(u,null,{default:t(()=>[e(_(Be))]),_:1}),s[15]||(s[15]=l("span",null,"平台监控",-1))]),l("div",Ze,[l("span",Ge,"最后更新: "+d(I(new Date)),1),e(f,{type:"primary",size:"small",icon:_(W),onClick:se},{default:t(()=>s[16]||(s[16]=[i("刷新")])),_:1,__:[16]},8,["icon"])])])]),default:t(()=>[e(ce,{modelValue:E.value,"onUpdate:modelValue":s[1]||(s[1]=a=>E.value=a),type:"card"},{default:t(()=>[e(D,{label:"服务器监控",name:"server"},{default:t(()=>[e(C,{data:X.value,style:{width:"100%"},border:"",stripe:""},{default:t(()=>[e(n,{prop:"name",label:"服务器名称","min-width":"150"}),e(n,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(b,{type:B(a.status)},{default:t(()=>[i(d(a.status),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"cpu",label:"CPU使用率",width:"150"},{default:t(({row:a})=>[e(h,{percentage:a.cpu,status:v(a.cpu)},null,8,["percentage","status"])]),_:1}),e(n,{prop:"memory",label:"内存使用率",width:"150"},{default:t(({row:a})=>[e(h,{percentage:a.memory,status:v(a.memory)},null,8,["percentage","status"])]),_:1}),e(n,{prop:"disk",label:"磁盘使用率",width:"150"},{default:t(({row:a})=>[e(h,{percentage:a.disk,status:v(a.disk)},null,8,["percentage","status"])]),_:1}),e(n,{prop:"lastCheck",label:"最后检查",width:"180"})]),_:1},8,["data"])]),_:1}),e(D,{label:"网络监控",name:"network"},{default:t(()=>[e(C,{data:Y.value,style:{width:"100%"},border:"",stripe:""},{default:t(()=>[e(n,{prop:"name",label:"设备名称","min-width":"150"}),e(n,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(b,{type:B(a.status)},{default:t(()=>[i(d(a.status),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"bandwidth",label:"带宽使用率",width:"150"},{default:t(({row:a})=>[e(h,{percentage:a.bandwidth,status:v(a.bandwidth)},null,8,["percentage","status"])]),_:1}),e(n,{prop:"packets",label:"数据包/秒",width:"120"}),e(n,{prop:"errors",label:"错误率",width:"120"},{default:t(({row:a})=>[l("span",{class:M(a.errors>1?"error-high":"error-normal")},d(a.errors)+"%",3)]),_:1}),e(n,{prop:"lastCheck",label:"最后检查",width:"180"})]),_:1},8,["data"])]),_:1}),e(D,{label:"存储监控",name:"storage"},{default:t(()=>[e(C,{data:Z.value,style:{width:"100%"},border:"",stripe:""},{default:t(()=>[e(n,{prop:"name",label:"存储名称","min-width":"150"}),e(n,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(b,{type:B(a.status)},{default:t(()=>[i(d(a.status),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"capacity",label:"容量",width:"100"}),e(n,{prop:"usage",label:"使用率",width:"150"},{default:t(({row:a})=>[e(h,{percentage:a.usage,status:v(a.usage)},null,8,["percentage","status"])]),_:1}),e(n,{prop:"iops",label:"IOPS",width:"100"}),e(n,{prop:"latency",label:"延迟",width:"100"}),e(n,{prop:"lastCheck",label:"最后检查",width:"180"})]),_:1},8,["data"])]),_:1}),e(D,{label:"教学系统",name:"education"},{default:t(()=>[e(C,{data:G.value,style:{width:"100%"},border:"",stripe:""},{default:t(()=>[e(n,{prop:"name",label:"系统名称","min-width":"150"}),e(n,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(b,{type:B(a.status)},{default:t(()=>[i(d(a.status),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"users",label:"在线用户数",width:"120"}),e(n,{prop:"response",label:"响应时间",width:"120"}),e(n,{prop:"load",label:"系统负载",width:"150"},{default:t(({row:a})=>[e(h,{percentage:a.load,status:v(a.load)},null,8,["percentage","status"])]),_:1}),e(n,{prop:"lastCheck",label:"最后检查",width:"180"})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(g,{class:"alarm-card",shadow:"hover"},{header:t(()=>[l("div",He,[l("div",Je,[e(u,null,{default:t(()=>[e(_(De))]),_:1}),s[17]||(s[17]=l("span",null,"告警记录",-1)),e(pe,{value:12,max:99,class:"alarm-badge",type:"danger"})]),l("div",Qe,[e(f,{type:"primary",size:"small",onClick:ie},{default:t(()=>s[18]||(s[18]=[i("查看全部")])),_:1,__:[18]})])])]),default:t(()=>[e(_e,null,{default:t(()=>[(k(!0),A(F,null,N(H.value,(a,y)=>(k(),V(me,{key:y,type:te(a.level),timestamp:a.time,hollow:a.level==="提示"},{default:t(()=>[l("div",Ie,[l("span",{class:M(["alarm-level",`level-${a.level.toLowerCase()}`])},"【"+d(a.level)+"】",3),i(" "+d(a.content),1)]),l("div",et,"来源: "+d(a.source),1)]),_:2},1032,["type","timestamp","hollow"]))),128))]),_:1})]),_:1})])}}}),nt=ze(tt,[["__scopeId","data-v-1ebe4fa0"]]);export{nt as default};
