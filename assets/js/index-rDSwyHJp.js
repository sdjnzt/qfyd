import{d as K,a as v,i as B,Z as N,e as L,k as U,j as t,b as l,r as s,q as i,t as c,B as S,X as D,Y as W,o as ee}from"./vendor-BtSynzSy.js";import{_ as te}from"./index-CqRjJalX.js";const le={class:"security-container"},ae={class:"card-header"},oe={class:"header-actions"},ne={class:"pagination-container"},ie={class:"dialog-footer"},se=K({__name:"index",setup(ue){const b=v(""),y=v(1),x=v(10),p=v([{id:1,name:"主防火墙A",type:"防火墙",ip:"192.168.0.1",version:"v8.0.5",location:"主机房",status:"正常",lastUpdate:"2025-06-15"},{id:2,name:"主防火墙B",type:"防火墙",ip:"192.168.0.2",version:"v8.0.5",location:"主机房",status:"正常",lastUpdate:"2025-06-15"},{id:3,name:"入侵检测系统A",type:"入侵检测",ip:"192.168.1.10",version:"v6.2.1",location:"主机房",status:"正常",lastUpdate:"2025-06-14"},{id:4,name:"入侵检测系统B",type:"入侵检测",ip:"192.168.1.11",version:"v6.2.1",location:"主机房",status:"警告",lastUpdate:"2025-06-13"},{id:5,name:"入侵防御系统",type:"入侵防御",ip:"192.168.1.20",version:"v7.1.3",location:"主机房",status:"正常",lastUpdate:"2025-06-15"},{id:6,name:"VPN网关A",type:"VPN网关",ip:"192.168.2.1",version:"v5.8.2",location:"主机房",status:"正常",lastUpdate:"2025-06-12"},{id:7,name:"VPN网关B",type:"VPN网关",ip:"192.168.2.2",version:"v5.8.2",location:"主机房",status:"正常",lastUpdate:"2025-06-12"},{id:8,name:"安全审计系统",type:"安全审计",ip:"192.168.3.1",version:"v4.5.7",location:"主机房",status:"正常",lastUpdate:"2025-06-15"},{id:9,name:"漏洞扫描器A",type:"漏洞扫描",ip:"192.168.4.1",version:"v3.2.8",location:"主机房",status:"正常",lastUpdate:"2025-06-10"},{id:10,name:"漏洞扫描器B",type:"漏洞扫描",ip:"192.168.4.2",version:"v3.2.8",location:"主机房",status:"离线",lastUpdate:"2025-06-08"}]),P=B(()=>b.value?p.value.filter(o=>o.name.includes(b.value)||o.type.includes(b.value)||o.location.includes(b.value)):p.value),q=B(()=>{const o=(y.value-1)*x.value;return P.value.slice(o,o+x.value)});function $(){y.value=1}function j(o){x.value=o,y.value=1}function A(o){y.value=o}const E=o=>{switch(o){case"正常":return"success";case"离线":return"info";case"错误":return"danger";case"警告":return"warning";default:return"info"}},V=v(!1),C=v("add"),n=N({id:0,name:"",type:"",ip:"",version:"",location:"",status:"正常",lastUpdate:""}),w=v(),M={name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],ip:[{required:!0,message:"请输入IP地址",trigger:"blur"}],version:[{required:!0,message:"请输入版本",trigger:"blur"}],location:[{required:!0,message:"请输入位置",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],lastUpdate:[{required:!0,message:"请输入最后更新时间",trigger:"blur"}]};function F(){C.value="add";const o=Math.max(...p.value.map(e=>e.id),0);Object.assign(n,{id:o+1,name:"",type:"",ip:"",version:"",location:"",status:"正常",lastUpdate:""}),V.value=!0,S(()=>{var e;return(e=w.value)==null?void 0:e.clearValidate()})}function O(o){C.value="edit",Object.assign(n,o),V.value=!0,S(()=>{var e;return(e=w.value)==null?void 0:e.clearValidate()})}function R(){w.value.validate(o=>{if(o){if(C.value==="add")p.value.unshift({...n}),D.success("新增成功");else{const e=p.value.findIndex(u=>u.id===n.id);e!==-1&&(p.value[e]={...n},D.success("编辑成功"))}V.value=!1}})}function T(o){W.confirm(`确定要删除安全设备"${o.name}"吗？`,"删除确认",{type:"warning"}).then(()=>{const e=p.value.findIndex(u=>u.id===o.id);e!==-1&&(p.value.splice(e,1),D.success("删除成功"))}).catch(()=>{})}const k=v(!1),m=N({name:"",type:"",ip:"",version:"",location:"",status:"",lastUpdate:""});function Q(o){Object.assign(m,o),k.value=!0}return(o,e)=>{const u=s("el-input"),f=s("el-button"),r=s("el-table-column"),X=s("el-tag"),Y=s("el-table"),Z=s("el-pagination"),G=s("el-card"),_=s("el-form-item"),d=s("el-option"),h=s("el-select"),H=s("el-form"),z=s("el-dialog"),g=s("el-descriptions-item"),J=s("el-descriptions");return ee(),L("div",le,[e[20]||(e[20]=U("h1",null,"安全防护",-1)),t(G,{class:"security-card"},{header:l(()=>[U("div",ae,[U("div",oe,[t(u,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),placeholder:"搜索安全设备（名称/类型/位置）...",clearable:"","prefix-icon":"Search",style:{width:"300px","margin-right":"10px"},onInput:$},null,8,["modelValue"]),t(f,{type:"primary",onClick:F},{default:l(()=>e[13]||(e[13]=[i("新增安全设备")])),_:1,__:[13]})])])]),default:l(()=>[t(Y,{data:q.value,style:{width:"100%"},border:"",stripe:"","highlight-current-row":""},{default:l(()=>[t(r,{prop:"id",label:"ID",width:"80"}),t(r,{prop:"name",label:"设备名称","min-width":"150"}),t(r,{prop:"type",label:"类型",width:"120"}),t(r,{prop:"ip",label:"IP地址",width:"150"}),t(r,{prop:"version",label:"版本",width:"120"}),t(r,{prop:"location",label:"位置",width:"150"}),t(r,{prop:"status",label:"状态",width:"100"},{default:l(({row:a})=>[t(X,{type:E(a.status)},{default:l(()=>[i(c(a.status),1)]),_:2},1032,["type"])]),_:1}),t(r,{prop:"lastUpdate",label:"最后更新",width:"150"}),t(r,{label:"操作",width:"220",fixed:"right"},{default:l(({row:a})=>[t(f,{type:"primary",size:"small",onClick:I=>Q(a)},{default:l(()=>e[14]||(e[14]=[i("查看")])),_:2,__:[14]},1032,["onClick"]),t(f,{type:"warning",size:"small",onClick:I=>O(a)},{default:l(()=>e[15]||(e[15]=[i("编辑")])),_:2,__:[15]},1032,["onClick"]),t(f,{type:"danger",size:"small",onClick:I=>T(a)},{default:l(()=>e[16]||(e[16]=[i("删除")])),_:2,__:[16]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),U("div",ne,[t(Z,{"current-page":y.value,"onUpdate:currentPage":e[1]||(e[1]=a=>y.value=a),"page-size":x.value,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:P.value.length,onSizeChange:j,onCurrentChange:A},null,8,["current-page","page-size","total"])])]),_:1}),t(z,{modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=a=>V.value=a),title:C.value==="add"?"新增安全设备":"编辑安全设备",width:"500px"},{footer:l(()=>[U("span",ie,[t(f,{onClick:e[9]||(e[9]=a=>V.value=!1)},{default:l(()=>e[17]||(e[17]=[i("取消")])),_:1,__:[17]}),t(f,{type:"primary",onClick:R},{default:l(()=>e[18]||(e[18]=[i("确定")])),_:1,__:[18]})])]),default:l(()=>[t(H,{model:n,rules:M,ref_key:"editFormRef",ref:w,"label-width":"100px"},{default:l(()=>[t(_,{label:"设备名称",prop:"name"},{default:l(()=>[t(u,{modelValue:n.name,"onUpdate:modelValue":e[2]||(e[2]=a=>n.name=a)},null,8,["modelValue"])]),_:1}),t(_,{label:"类型",prop:"type"},{default:l(()=>[t(h,{modelValue:n.type,"onUpdate:modelValue":e[3]||(e[3]=a=>n.type=a),placeholder:"请选择"},{default:l(()=>[t(d,{label:"防火墙",value:"防火墙"}),t(d,{label:"入侵检测",value:"入侵检测"}),t(d,{label:"入侵防御",value:"入侵防御"}),t(d,{label:"VPN网关",value:"VPN网关"}),t(d,{label:"安全审计",value:"安全审计"}),t(d,{label:"漏洞扫描",value:"漏洞扫描"})]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"IP地址",prop:"ip"},{default:l(()=>[t(u,{modelValue:n.ip,"onUpdate:modelValue":e[4]||(e[4]=a=>n.ip=a)},null,8,["modelValue"])]),_:1}),t(_,{label:"版本",prop:"version"},{default:l(()=>[t(u,{modelValue:n.version,"onUpdate:modelValue":e[5]||(e[5]=a=>n.version=a)},null,8,["modelValue"])]),_:1}),t(_,{label:"位置",prop:"location"},{default:l(()=>[t(u,{modelValue:n.location,"onUpdate:modelValue":e[6]||(e[6]=a=>n.location=a)},null,8,["modelValue"])]),_:1}),t(_,{label:"状态",prop:"status"},{default:l(()=>[t(h,{modelValue:n.status,"onUpdate:modelValue":e[7]||(e[7]=a=>n.status=a),placeholder:"请选择"},{default:l(()=>[t(d,{label:"正常",value:"正常"}),t(d,{label:"离线",value:"离线"}),t(d,{label:"错误",value:"错误"}),t(d,{label:"警告",value:"警告"})]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"最后更新",prop:"lastUpdate"},{default:l(()=>[t(u,{modelValue:n.lastUpdate,"onUpdate:modelValue":e[8]||(e[8]=a=>n.lastUpdate=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(z,{modelValue:k.value,"onUpdate:modelValue":e[12]||(e[12]=a=>k.value=a),title:"安全设备详情",width:"400px","show-close":!0},{footer:l(()=>[t(f,{onClick:e[11]||(e[11]=a=>k.value=!1)},{default:l(()=>e[19]||(e[19]=[i("关闭")])),_:1,__:[19]})]),default:l(()=>[t(J,{column:1,border:""},{default:l(()=>[t(g,{label:"设备名称"},{default:l(()=>[i(c(m.name),1)]),_:1}),t(g,{label:"类型"},{default:l(()=>[i(c(m.type),1)]),_:1}),t(g,{label:"IP地址"},{default:l(()=>[i(c(m.ip),1)]),_:1}),t(g,{label:"版本"},{default:l(()=>[i(c(m.version),1)]),_:1}),t(g,{label:"位置"},{default:l(()=>[i(c(m.location),1)]),_:1}),t(g,{label:"状态"},{default:l(()=>[i(c(m.status),1)]),_:1}),t(g,{label:"最后更新"},{default:l(()=>[i(c(m.lastUpdate),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),pe=te(se,[["__scopeId","data-v-66e6336e"]]);export{pe as default};
