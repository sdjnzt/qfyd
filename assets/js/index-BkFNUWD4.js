import{d as ye,a as p,Z as B,i as X,z as _e,B as W,w as ve,C as Y,e as ge,k as n,j as t,b as a,r as u,t as m,m as Z,x as be,q as i,ai as xe,X as q,Y as Ce,o as we}from"./vendor-CgAfaZZC.js";import{_ as he}from"./index-BrFT0OYg.js";const Se={class:"server-container"},Ve={class:"card-header"},Le={class:"header-left"},Ue={class:"header-right"},ke={class:"stat-box"},Oe={class:"stat-box"},Pe={class:"stat-value"},ze={class:"stat-box"},De={class:"stat-value warning"},Ie={class:"card-header"},Re={class:"header-left"},We={class:"card-header"},qe={class:"header-actions"},Ae={class:"pagination-container"},Ee={class:"dialog-footer"},Me=ye({__name:"index",setup($e){const _=p(""),x=p(1),k=p(10),A=p("day"),F=B({day:{used:30,warning:2},week:{used:29,warning:3},month:{used:28,warning:5}}),S=p(F.day),d=p([{id:1,name:"教务系统服务器",ip:"192.168.1.10",type:"物理服务器",os:"Linux CentOS 8",cpu:45,memory:60,status:"运行中"},{id:2,name:"学生管理服务器",ip:"192.168.1.11",type:"物理服务器",os:"Windows Server 2019",cpu:65,memory:75,status:"运行中"},{id:3,name:"财务系统服务器",ip:"192.168.1.12",type:"虚拟服务器",os:"Linux Ubuntu 20.04",cpu:35,memory:40,status:"运行中"},{id:4,name:"图书管理服务器",ip:"192.168.1.13",type:"虚拟服务器",os:"Windows Server 2016",cpu:25,memory:30,status:"运行中"},{id:5,name:"备份数据库服务器",ip:"192.168.1.14",type:"物理服务器",os:"Linux CentOS 8",cpu:0,memory:10,status:"已停止"},{id:6,name:"虚拟化平台A",ip:"192.168.1.15",type:"虚拟服务器",os:"Linux Kylin",cpu:55,memory:70,status:"运行中"},{id:7,name:"虚拟化平台B",ip:"192.168.1.16",type:"虚拟服务器",os:"Linux Ubuntu 22.04",cpu:62,memory:80,status:"运行中"},{id:8,name:"门户网站服务器",ip:"192.168.1.17",type:"物理服务器",os:"Windows Server 2019",cpu:48,memory:55,status:"运行中"},{id:9,name:"OA系统服务器",ip:"192.168.1.18",type:"物理服务器",os:"Linux CentOS 7",cpu:41,memory:60,status:"运行中"},{id:10,name:"应急指挥服务器",ip:"192.168.1.19",type:"虚拟服务器",os:"Linux CentOS 8",cpu:58,memory:72,status:"已停止"},{id:11,name:"云桌面服务器",ip:"192.168.1.20",type:"虚拟服务器",os:"Linux Kylin",cpu:38,memory:55,status:"运行中"},{id:12,name:"视频监控服务器",ip:"192.168.1.21",type:"物理服务器",os:"Windows Server 2016",cpu:52,memory:68,status:"运行中"},{id:13,name:"大数据分析服务器",ip:"192.168.1.22",type:"物理服务器",os:"Linux Ubuntu 20.04",cpu:75,memory:85,status:"异常"},{id:14,name:"科研平台服务器",ip:"192.168.1.23",type:"虚拟服务器",os:"Linux CentOS 8",cpu:68,memory:78,status:"运行中"},{id:15,name:"云存储服务器",ip:"192.168.1.24",type:"物理服务器",os:"Linux Kylin",cpu:35,memory:45,status:"运行中"},{id:16,name:"教室多媒体服务器",ip:"192.168.1.25",type:"虚拟服务器",os:"Windows Server 2019",cpu:55,memory:70,status:"运行中"},{id:17,name:"实验室服务器",ip:"192.168.1.26",type:"物理服务器",os:"Linux Ubuntu 22.04",cpu:62,memory:80,status:"运行中"},{id:18,name:"云备份服务器",ip:"192.168.1.27",type:"虚拟服务器",os:"Linux CentOS 7",cpu:48,memory:55,status:"运行中"},{id:19,name:"档案管理服务器",ip:"192.168.1.28",type:"物理服务器",os:"Windows Server 2016",cpu:41,memory:60,status:"运行中"},{id:20,name:"门户备份服务器",ip:"192.168.1.29",type:"虚拟服务器",os:"Linux CentOS 8",cpu:58,memory:72,status:"已停止"},{id:21,name:"教学资源服务器",ip:"192.168.1.30",type:"物理服务器",os:"Linux Ubuntu 20.04",cpu:45,memory:65,status:"运行中"},{id:22,name:"数据挖掘服务器",ip:"192.168.1.31",type:"物理服务器",os:"Linux CentOS 8",cpu:70,memory:80,status:"维护中"},{id:23,name:"虚拟化平台C",ip:"192.168.1.32",type:"虚拟服务器",os:"Linux Kylin",cpu:50,memory:60,status:"运行中"},{id:24,name:"考试系统服务器",ip:"192.168.1.33",type:"物理服务器",os:"Windows Server 2019",cpu:40,memory:55,status:"运行中"},{id:25,name:"校园卡系统服务器",ip:"192.168.1.34",type:"虚拟服务器",os:"Linux CentOS 7",cpu:35,memory:50,status:"运行中"},{id:26,name:"统一认证服务器",ip:"192.168.1.35",type:"物理服务器",os:"Linux Ubuntu 20.04",cpu:60,memory:70,status:"运行中"},{id:27,name:"科研数据备份服务器",ip:"192.168.1.36",type:"物理服务器",os:"Linux CentOS 8",cpu:25,memory:40,status:"运行中"},{id:28,name:"虚拟实验室服务器",ip:"192.168.1.37",type:"虚拟服务器",os:"Windows Server 2019",cpu:65,memory:75,status:"运行中"},{id:29,name:"远程教学服务器",ip:"192.168.1.38",type:"物理服务器",os:"Linux Kylin",cpu:70,memory:80,status:"异常"},{id:30,name:"课程资源服务器",ip:"192.168.1.39",type:"虚拟服务器",os:"Linux Ubuntu 22.04",cpu:55,memory:65,status:"运行中"}]),j=X(()=>_.value?d.value.filter(l=>l.name.includes(_.value)||l.ip.includes(_.value)||l.type.includes(_.value)||l.os.includes(_.value)):d.value),G=X(()=>{const l=(x.value-1)*k.value;return j.value.slice(l,l+k.value)});let O=null,P=null;const E=p(null),M=p(null);_e(()=>{W(()=>{z()})}),ve(A,l=>{S.value=F[l],q.success(`已切换到${l==="day"?"今日":l==="week"?"本周":"本月"}数据`),z()});function z(){W(()=>{try{if(E.value){O&&O.dispose(),O=Y(E.value);const l=d.value.filter(c=>c.status==="运行中").length,e=d.value.filter(c=>c.status==="已停止").length,r=d.value.filter(c=>c.status==="异常").length,V=d.value.filter(c=>c.status==="维护中").length;O.setOption({title:{text:"服务器状态分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{bottom:"5%",left:"center"},series:[{name:"服务器状态",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1},emphasis:{label:{show:!0,fontSize:"16",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:l,name:"运行中",itemStyle:{color:"#67C23A"}},{value:e,name:"已停止",itemStyle:{color:"#909399"}},{value:r,name:"异常",itemStyle:{color:"#F56C6C"}},{value:V,name:"维护中",itemStyle:{color:"#E6A23C"}}]}]})}if(M.value){P&&P.dispose(),P=Y(M.value);const l=[0,0,0,0],e=[0,0,0,0];d.value.forEach(r=>{r.cpu<25?l[0]++:r.cpu<50?l[1]++:r.cpu<75?l[2]++:l[3]++,r.memory<25?e[0]++:r.memory<50?e[1]++:r.memory<75?e[2]++:e[3]++}),P.setOption({title:{text:"服务器资源使用分布",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["CPU","内存"],bottom:"5%"},grid:{left:"3%",right:"4%",bottom:"15%",top:"15%",containLabel:!0},xAxis:{type:"category",data:["0-25%","25-50%","50-75%","75-100%"]},yAxis:{type:"value",name:"服务器数量"},series:[{name:"CPU",type:"bar",emphasis:{focus:"series"},data:l,itemStyle:{color:"#409EFF"}},{name:"内存",type:"bar",emphasis:{focus:"series"},data:e,itemStyle:{color:"#67C23A"}}]})}}catch(l){console.error("初始化图表失败:",l)}})}function H(){x.value=1}function J(l){k.value=l,x.value=1}function ee(l){x.value=l}const te=l=>l>80?"exception":l>60?"warning":"success",ae=l=>l>80?"exception":l>60?"warning":"success",le=l=>{switch(l){case"运行中":return"success";case"已停止":return"info";case"异常":return"danger";case"维护中":return"warning";default:return"info"}},C=p(!1),D=p("add"),o=B({id:0,name:"",ip:"",type:"",os:"",cpu:0,memory:0,status:"运行中"}),I=p(),se={name:[{required:!0,message:"请输入服务器名称",trigger:"blur"}],ip:[{required:!0,message:"请输入IP地址",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],os:[{required:!0,message:"请输入操作系统",trigger:"blur"}],cpu:[{required:!0,type:"number",message:"请输入CPU使用率",trigger:"blur"}],memory:[{required:!0,type:"number",message:"请输入内存使用率",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]};function ne(){D.value="add";const l=Math.max(...d.value.map(e=>e.id),0);Object.assign(o,{id:l+1,name:"",ip:"",type:"",os:"",cpu:0,memory:0,status:"运行中"}),C.value=!0,W(()=>{var e;return(e=I.value)==null?void 0:e.clearValidate()})}function oe(l){D.value="edit",Object.assign(o,l),C.value=!0,W(()=>{var e;return(e=I.value)==null?void 0:e.clearValidate()})}function ue(){I.value.validate(l=>{if(l){if(D.value==="add")d.value.unshift({...o}),q.success("新增成功");else{const e=d.value.findIndex(r=>r.id===o.id);e!==-1&&(d.value[e]={...o},q.success("编辑成功"))}C.value=!1,z()}})}function ie(l){Ce.confirm(`确定要删除服务器"${l.name}(${l.ip})"吗？`,"删除确认",{type:"warning"}).then(()=>{const e=d.value.findIndex(r=>r.id===l.id);e!==-1&&(d.value.splice(e,1),q.success("删除成功"),z())}).catch(()=>{})}const R=p(!1),y=B({name:"",ip:"",type:"",os:"",cpu:0,memory:0,status:""});function re(l){Object.assign(y,l),R.value=!0}return(l,e)=>{const r=u("el-icon"),V=u("el-radio-button"),c=u("el-radio-group"),L=u("el-progress"),U=u("el-col"),K=u("el-row"),$=u("el-card"),w=u("el-input"),v=u("el-button"),f=u("el-table-column"),de=u("el-tag"),pe=u("el-table"),me=u("el-pagination"),g=u("el-form-item"),h=u("el-option"),N=u("el-select"),ce=u("el-form"),T=u("el-dialog"),b=u("el-descriptions-item"),fe=u("el-descriptions");return we(),ge("div",Se,[e[30]||(e[30]=n("h1",null,"服务器管理",-1)),t($,{class:"license-card",shadow:"hover"},{header:a(()=>[n("div",Ve,[n("div",Le,[t(r,null,{default:a(()=>[t(Z(be))]),_:1}),e[14]||(e[14]=n("span",null,"服务器许可概览",-1))]),n("div",Ue,[t(c,{modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=s=>A.value=s),size:"small"},{default:a(()=>[t(V,{label:"day"},{default:a(()=>e[15]||(e[15]=[i("今日")])),_:1,__:[15]}),t(V,{label:"week"},{default:a(()=>e[16]||(e[16]=[i("本周")])),_:1,__:[16]}),t(V,{label:"month"},{default:a(()=>e[17]||(e[17]=[i("本月")])),_:1,__:[17]})]),_:1},8,["modelValue"])])])]),default:a(()=>[t(K,{gutter:20},{default:a(()=>[t(U,{span:8},{default:a(()=>[n("div",ke,[e[18]||(e[18]=n("div",{class:"stat-title"},"许可总数",-1)),e[19]||(e[19]=n("div",{class:"stat-value"},"30",-1)),t(L,{percentage:100,status:"success"})])]),_:1}),t(U,{span:8},{default:a(()=>[n("div",Oe,[e[20]||(e[20]=n("div",{class:"stat-title"},"已使用",-1)),n("div",Pe,m(S.value.used),1),t(L,{percentage:S.value.used/30*100,status:"success"},null,8,["percentage"])])]),_:1}),t(U,{span:8},{default:a(()=>[n("div",ze,[e[21]||(e[21]=n("div",{class:"stat-title"},"告警服务器",-1)),n("div",De,m(S.value.warning),1),t(L,{percentage:S.value.warning/30*100,status:"warning"},null,8,["percentage"])])]),_:1})]),_:1})]),_:1}),t($,{class:"server-stats-card",shadow:"hover"},{header:a(()=>[n("div",Ie,[n("div",Re,[t(r,null,{default:a(()=>[t(Z(xe))]),_:1}),e[22]||(e[22]=n("span",null,"服务器状态分析",-1))])])]),default:a(()=>[t(K,{gutter:20},{default:a(()=>[t(U,{span:12},{default:a(()=>[n("div",{ref_key:"statusChartRef",ref:E,class:"chart-container"},null,512)]),_:1}),t(U,{span:12},{default:a(()=>[n("div",{ref_key:"resourceChartRef",ref:M,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),t($,{class:"server-card"},{header:a(()=>[n("div",We,[n("div",qe,[t(w,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),placeholder:"搜索服务器（名称/IP/负责人/类型）...",clearable:"","prefix-icon":"Search",style:{width:"300px","margin-right":"10px"},onInput:H},null,8,["modelValue"]),t(v,{type:"primary",onClick:ne},{default:a(()=>e[23]||(e[23]=[i("新增服务器")])),_:1,__:[23]})])])]),default:a(()=>[t(pe,{data:G.value,style:{width:"100%"},border:"",stripe:"","highlight-current-row":""},{default:a(()=>[t(f,{prop:"id",label:"ID",width:"80"}),t(f,{prop:"name",label:"服务器名称","min-width":"150"}),t(f,{prop:"ip",label:"IP地址",width:"150"}),t(f,{prop:"type",label:"类型",width:"120"}),t(f,{prop:"os",label:"操作系统",width:"150"}),t(f,{prop:"cpu",label:"CPU使用率",width:"120"},{default:a(({row:s})=>[t(L,{percentage:s.cpu,status:te(s.cpu)},null,8,["percentage","status"])]),_:1}),t(f,{prop:"memory",label:"内存使用率",width:"120"},{default:a(({row:s})=>[t(L,{percentage:s.memory,status:ae(s.memory)},null,8,["percentage","status"])]),_:1}),t(f,{prop:"status",label:"状态",width:"100"},{default:a(({row:s})=>[t(de,{type:le(s.status)},{default:a(()=>[i(m(s.status),1)]),_:2},1032,["type"])]),_:1}),t(f,{label:"操作",width:"220",fixed:"right"},{default:a(({row:s})=>[t(v,{type:"primary",size:"small",onClick:Q=>re(s)},{default:a(()=>e[24]||(e[24]=[i("查看")])),_:2,__:[24]},1032,["onClick"]),t(v,{type:"warning",size:"small",onClick:Q=>oe(s)},{default:a(()=>e[25]||(e[25]=[i("编辑")])),_:2,__:[25]},1032,["onClick"]),t(v,{type:"danger",size:"small",onClick:Q=>ie(s)},{default:a(()=>e[26]||(e[26]=[i("删除")])),_:2,__:[26]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),n("div",Ae,[t(me,{"current-page":x.value,"onUpdate:currentPage":e[2]||(e[2]=s=>x.value=s),"page-size":k.value,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:j.value.length,onSizeChange:J,onCurrentChange:ee},null,8,["current-page","page-size","total"])])]),_:1}),t(T,{modelValue:C.value,"onUpdate:modelValue":e[11]||(e[11]=s=>C.value=s),title:D.value==="add"?"新增服务器":"编辑服务器",width:"500px"},{footer:a(()=>[n("span",Ee,[t(v,{onClick:e[10]||(e[10]=s=>C.value=!1)},{default:a(()=>e[27]||(e[27]=[i("取消")])),_:1,__:[27]}),t(v,{type:"primary",onClick:ue},{default:a(()=>e[28]||(e[28]=[i("确定")])),_:1,__:[28]})])]),default:a(()=>[t(ce,{model:o,rules:se,ref_key:"editFormRef",ref:I,"label-width":"100px"},{default:a(()=>[t(g,{label:"服务器名称",prop:"name"},{default:a(()=>[t(w,{modelValue:o.name,"onUpdate:modelValue":e[3]||(e[3]=s=>o.name=s)},null,8,["modelValue"])]),_:1}),t(g,{label:"IP地址",prop:"ip"},{default:a(()=>[t(w,{modelValue:o.ip,"onUpdate:modelValue":e[4]||(e[4]=s=>o.ip=s)},null,8,["modelValue"])]),_:1}),t(g,{label:"类型",prop:"type"},{default:a(()=>[t(N,{modelValue:o.type,"onUpdate:modelValue":e[5]||(e[5]=s=>o.type=s),placeholder:"请选择"},{default:a(()=>[t(h,{label:"物理服务器",value:"物理服务器"}),t(h,{label:"虚拟服务器",value:"虚拟服务器"})]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"操作系统",prop:"os"},{default:a(()=>[t(w,{modelValue:o.os,"onUpdate:modelValue":e[6]||(e[6]=s=>o.os=s)},null,8,["modelValue"])]),_:1}),t(g,{label:"CPU使用率",prop:"cpu"},{default:a(()=>[t(w,{modelValue:o.cpu,"onUpdate:modelValue":e[7]||(e[7]=s=>o.cpu=s),modelModifiers:{number:!0},type:"number",min:"0",max:"100"},null,8,["modelValue"])]),_:1}),t(g,{label:"内存使用率",prop:"memory"},{default:a(()=>[t(w,{modelValue:o.memory,"onUpdate:modelValue":e[8]||(e[8]=s=>o.memory=s),modelModifiers:{number:!0},type:"number",min:"0",max:"100"},null,8,["modelValue"])]),_:1}),t(g,{label:"状态",prop:"status"},{default:a(()=>[t(N,{modelValue:o.status,"onUpdate:modelValue":e[9]||(e[9]=s=>o.status=s),placeholder:"请选择"},{default:a(()=>[t(h,{label:"运行中",value:"运行中"}),t(h,{label:"已停止",value:"已停止"}),t(h,{label:"异常",value:"异常"}),t(h,{label:"维护中",value:"维护中"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(T,{modelValue:R.value,"onUpdate:modelValue":e[13]||(e[13]=s=>R.value=s),title:"服务器详情",width:"400px","show-close":!0},{footer:a(()=>[t(v,{onClick:e[12]||(e[12]=s=>R.value=!1)},{default:a(()=>e[29]||(e[29]=[i("关闭")])),_:1,__:[29]})]),default:a(()=>[t(fe,{column:1,border:""},{default:a(()=>[t(b,{label:"服务器名称"},{default:a(()=>[i(m(y.name),1)]),_:1}),t(b,{label:"IP地址"},{default:a(()=>[i(m(y.ip),1)]),_:1}),t(b,{label:"类型"},{default:a(()=>[i(m(y.type),1)]),_:1}),t(b,{label:"操作系统"},{default:a(()=>[i(m(y.os),1)]),_:1}),t(b,{label:"CPU使用率"},{default:a(()=>[i(m(y.cpu)+"%",1)]),_:1}),t(b,{label:"内存使用率"},{default:a(()=>[i(m(y.memory)+"%",1)]),_:1}),t(b,{label:"状态"},{default:a(()=>[i(m(y.status),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),je=he(Me,[["__scopeId","data-v-04298a5a"]]);export{je as default};
