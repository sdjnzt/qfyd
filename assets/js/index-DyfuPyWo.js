import{d as ge,a as m,Z as ee,af as F,V as I,ag as U,w as te,z as ye,e as N,j as t,b as a,r as i,k as n,m as O,D as he,q as f,t as y,x as we,F as ae,f as le,ah as be,X as T,Y as E,o as k,c as P,n as xe,B as R,C as q}from"./vendor-CgAfaZZC.js";import{_ as Ae}from"./index-BrFT0OYg.js";const Ce={class:"device-manage-container"},ke={class:"header-title"},Se={class:"header-actions"},Be={class:"stat-box"},Me={class:"stat-value"},De={class:"stat-box"},ze={class:"stat-value"},Ve={class:"stat-box"},Te={class:"stat-value warning"},Ee={class:"card-header"},Le={class:"header-left"},$e={class:"category-header"},Fe={class:"category-content"},Ie={class:"category-row"},Ue={class:"value"},Ne={class:"category-row"},Oe={class:"value online"},Pe={class:"category-row"},Re={class:"value warning"},qe={class:"filter-container"},Xe={class:"pagination-container"},je=ge({__name:"index",setup(Ge){const M=m("overview"),S=m("day"),h=m(""),B=m(""),w=m(""),X=m(1),j=m(10),ne=m([{name:"网络设备管理许可",type:"设备",total:50,used:48,available:2,expireDate:"2025-12-31",status:"有效"},{name:"服务器管理许可",type:"设备",total:30,used:30,available:0,expireDate:"2025-12-31",status:"有效"},{name:"存储设备管理许可",type:"设备",total:20,used:19,available:1,expireDate:"2025-12-31",status:"有效"}]),G=ee({day:{total:100,online:97,warning:5},week:{total:100,online:95,warning:7},month:{total:100,online:92,warning:10}}),c=m(G.day),H=ee({day:[{name:"网络设备",total:50,used:48,warning:2,icon:F},{name:"服务器",total:30,used:30,warning:2,icon:I},{name:"存储设备",total:20,used:19,warning:1,icon:U}],week:[{name:"网络设备",total:50,used:47,warning:3,icon:F},{name:"服务器",total:30,used:30,warning:3,icon:I},{name:"存储设备",total:20,used:18,warning:1,icon:U}],month:[{name:"网络设备",total:50,used:46,warning:4,icon:F},{name:"服务器",total:30,used:28,warning:5,icon:I},{name:"存储设备",total:20,used:18,warning:1,icon:U}]}),D=m(H.day),Q=m([{id:1,name:"核心路由器-01",category:"网络设备",ip:"192.168.1.1",location:"数据中心A区",status:"在线",lastActive:"2025-06-10 15:30:45"},{id:2,name:"核心交换机-01",category:"网络设备",ip:"192.168.1.2",location:"数据中心A区",status:"在线",lastActive:"2025-06-10 15:28:32"},{id:3,name:"核心防火墙-01",category:"网络设备",ip:"192.168.1.3",location:"数据中心A区",status:"告警",lastActive:"2025-06-10 15:15:20"},{id:4,name:"汇聚交换机-01",category:"网络设备",ip:"192.168.2.1",location:"教学楼A区",status:"在线",lastActive:"2025-06-10 15:10:45"},{id:5,name:"汇聚交换机-02",category:"网络设备",ip:"192.168.3.1",location:"教学楼B区",status:"离线",lastActive:"2025-06-09 10:30:12"},{id:6,name:"应用服务器-01",category:"服务器",ip:"192.168.10.1",location:"数据中心A区",status:"在线",lastActive:"2025-06-10 15:05:30"},{id:7,name:"数据库服务器-01",category:"服务器",ip:"192.168.10.2",location:"数据中心A区",status:"在线",lastActive:"2025-06-10 14:58:45"},{id:8,name:"虚拟化平台-01",category:"服务器",ip:"192.168.10.3",location:"数据中心A区",status:"告警",lastActive:"2025-06-10 14:45:22"},{id:9,name:"备份服务器-01",category:"服务器",ip:"192.168.10.4",location:"数据中心B区",status:"在线",lastActive:"2025-06-10 14:30:18"},{id:10,name:"应用服务器-02",category:"服务器",ip:"192.168.10.5",location:"数据中心B区",status:"在线",lastActive:"2025-06-10 14:25:40"},{id:11,name:"主存储阵列-01",category:"存储设备",ip:"192.168.20.1",location:"数据中心A区",status:"在线",lastActive:"2025-06-10 14:20:15"},{id:12,name:"备份存储-01",category:"存储设备",ip:"192.168.20.2",location:"数据中心B区",status:"在线",lastActive:"2025-06-10 14:15:33"},{id:13,name:"SAN交换机-01",category:"存储设备",ip:"192.168.20.3",location:"数据中心A区",status:"告警",lastActive:"2025-06-10 14:10:22"},{id:14,name:"SAN交换机-02",category:"存储设备",ip:"192.168.20.4",location:"数据中心B区",status:"在线",lastActive:"2025-06-10 14:05:18"},{id:15,name:"归档存储-01",category:"存储设备",ip:"192.168.20.5",location:"数据中心B区",status:"在线",lastActive:"2025-06-10 14:00:55"}]),L=m(Q.value);let v=null,_=null,g=null;te(S,o=>{c.value=G[o],D.value=H[o],T.success(`已切换到${o==="day"?"今日":o==="week"?"本周":"本月"}数据`),M.value==="stats"&&R(()=>{Y()})}),te(M,o=>{o==="stats"&&R(()=>{Y()})}),ye(()=>{A()});function oe(){T.success("数据已刷新")}function se(){E.prompt("请输入设备名称","添加设备",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入设备名称"}).then(({value:o})=>{T({type:"success",message:`添加设备: ${o}`})}).catch(()=>{})}function A(){L.value=Q.value.filter(o=>{const e=h.value?o.name.toLowerCase().includes(h.value.toLowerCase())||o.ip.includes(h.value)||o.location.toLowerCase().includes(h.value.toLowerCase()):!0,s=B.value?o.category===B.value:!0;let r=!0;return w.value&&(w.value==="online"?r=o.status==="在线":w.value==="offline"?r=o.status==="离线":w.value==="warning"&&(r=o.status==="告警")),e&&s&&r})}function ie(){h.value="",B.value="",w.value="",A()}function re(o){switch(o){case"在线":return"success";case"离线":return"info";case"告警":return"warning";default:return"info"}}function ue(o,e){const s=o/e*100;return s>90?"exception":s>70?"warning":"success"}function de(o){E.alert(`设备详情: ${o.name}`,"设备详情",{confirmButtonText:"确定"})}function ce(o){E.alert(`编辑设备: ${o.name}`,"编辑设备",{confirmButtonText:"确定"})}function pe(o){E.confirm(`确认删除设备: ${o.name}?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{T({type:"success",message:"删除成功"})}).catch(()=>{})}function Y(){R(()=>{try{const e=document.querySelector(".chart-container");e?(v&&typeof v.dispose=="function"&&v.dispose(),v=q(e),v&&v.setOption({title:{text:"设备状态分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{bottom:"5%",left:"center"},series:[{name:"设备状态",type:"pie",radius:"50%",data:[{value:c.value.online-c.value.warning,name:"在线正常"},{value:c.value.warning,name:"告警"},{value:c.value.total-c.value.online,name:"离线"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{color:function(s){return["#67C23A","#E6A23C","#909399"][s.dataIndex]}}}]})):console.warn("未找到设备状态图表容器")}catch(e){console.error("初始化设备状态图表失败:",e)}try{const e=document.querySelectorAll(".chart-container");if(e&&e.length>1){const s=e[1];_&&typeof _.dispose=="function"&&_.dispose(),_=q(s),_&&_.setOption({title:{text:"设备类型分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{bottom:"5%",left:"center"},series:[{name:"设备类型",type:"pie",radius:"50%",data:D.value.map(r=>({value:r.used,name:r.name})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}else console.warn("未找到设备类型图表容器")}catch(e){console.error("初始化设备类型图表失败:",e)}try{const e=document.querySelector(".trend-chart");if(e){if(g&&typeof g.dispose=="function"&&g.dispose(),g=q(e),g){let s=[],r=[],C=[];if(S.value==="day")for(let u=0;u<24;u++){s.push(`${u}:00`);const p=92+Math.floor(Math.random()*6);r.push(p),C.push(Math.floor(Math.random()*5))}else if(S.value==="week"){const u=["周一","周二","周三","周四","周五","周六","周日"];for(let p=0;p<7;p++){s.push(u[p]);const b=90+Math.floor(Math.random()*8);r.push(b),C.push(3+Math.floor(Math.random()*5))}}else for(let u=1;u<=30;u++){s.push(`${u}日`);const p=88+Math.floor(Math.random()*10);r.push(p),C.push(2+Math.floor(Math.random()*8))}g.setOption({title:{text:"设备在线率趋势",left:"center"},tooltip:{trigger:"axis"},legend:{data:["在线率","告警数"],bottom:"5%"},grid:{left:"3%",right:"4%",bottom:"15%",top:"15%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:s},yAxis:[{type:"value",name:"在线率(%)",min:80,max:100},{type:"value",name:"告警数",min:0,max:20}],series:[{name:"在线率",type:"line",data:r,smooth:!0,yAxisIndex:0,itemStyle:{color:"#409EFF"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64,158,255,0.3)"},{offset:1,color:"rgba(64,158,255,0.1)"}]}}},{name:"告警数",type:"bar",data:C,yAxisIndex:1,itemStyle:{color:"#E6A23C"}}]})}}else console.warn("未找到设备趋势图表容器")}catch(e){console.error("初始化设备趋势图表失败:",e)}const o=()=>{v&&v.resize(),_&&_.resize(),g&&g.resize()};window.removeEventListener("resize",o),window.addEventListener("resize",o)})}return(o,e)=>{const s=i("el-icon"),r=i("el-radio-button"),C=i("el-radio-group"),u=i("el-button"),p=i("el-card"),b=i("el-progress"),x=i("el-col"),z=i("el-row"),d=i("el-table-column"),Z=i("el-tag"),J=i("el-table"),$=i("el-tab-pane"),me=i("el-input"),V=i("el-option"),K=i("el-select"),fe=i("el-button-group"),ve=i("el-pagination"),_e=i("el-tabs");return k(),N("div",Ce,[t(p,{shadow:"hover",class:"device-header-card"},{default:a(()=>[n("div",ke,[t(s,null,{default:a(()=>[t(O(he))]),_:1}),e[7]||(e[7]=n("span",null,"设备管理平台",-1))]),n("div",Se,[t(C,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=l=>S.value=l),size:"small",class:"time-filter"},{default:a(()=>[t(r,{label:"day"},{default:a(()=>e[8]||(e[8]=[f("今日")])),_:1,__:[8]}),t(r,{label:"week"},{default:a(()=>e[9]||(e[9]=[f("本周")])),_:1,__:[9]}),t(r,{label:"month"},{default:a(()=>e[10]||(e[10]=[f("本月")])),_:1,__:[10]})]),_:1},8,["modelValue"]),t(u,{type:"primary",onClick:oe},{default:a(()=>e[11]||(e[11]=[f("刷新")])),_:1,__:[11]}),t(u,{type:"success",onClick:se},{default:a(()=>e[12]||(e[12]=[f("添加设备")])),_:1,__:[12]})])]),_:1}),t(p,{shadow:"hover",class:"device-stats-card"},{default:a(()=>[t(z,{gutter:20},{default:a(()=>[t(x,{span:8},{default:a(()=>[n("div",Be,[e[13]||(e[13]=n("div",{class:"stat-title"},"设备总数",-1)),n("div",Me,y(c.value.total),1),t(b,{percentage:100,status:"success"})])]),_:1}),t(x,{span:8},{default:a(()=>[n("div",De,[e[14]||(e[14]=n("div",{class:"stat-title"},"在线设备",-1)),n("div",ze,y(c.value.online),1),t(b,{percentage:c.value.online/c.value.total*100,status:"success"},null,8,["percentage"])])]),_:1}),t(x,{span:8},{default:a(()=>[n("div",Ve,[e[15]||(e[15]=n("div",{class:"stat-title"},"告警设备",-1)),n("div",Te,y(c.value.warning),1),t(b,{percentage:c.value.warning/c.value.total*100,status:"warning"},null,8,["percentage"])])]),_:1})]),_:1})]),_:1}),t(p,{shadow:"hover",class:"device-license-card"},{header:a(()=>[n("div",Ee,[n("div",Le,[t(s,null,{default:a(()=>[t(O(we))]),_:1}),e[16]||(e[16]=n("span",null,"许可证使用情况",-1))])])]),default:a(()=>[t(J,{data:ne.value,style:{width:"100%"},border:"",stripe:""},{default:a(()=>[t(d,{prop:"name",label:"许可名称","min-width":"150"}),t(d,{prop:"type",label:"许可类型",width:"120"}),t(d,{prop:"total",label:"许可数量",width:"100"}),t(d,{prop:"used",label:"已使用",width:"100"}),t(d,{prop:"available",label:"可用",width:"100"}),t(d,{prop:"expireDate",label:"到期日期",width:"120"}),t(d,{label:"使用情况",width:"180"},{default:a(({row:l})=>[t(b,{percentage:Math.round(l.used/l.total*100),status:ue(l.used,l.total)},null,8,["percentage","status"])]),_:1}),t(d,{prop:"status",label:"状态",width:"100"},{default:a(({row:l})=>[t(Z,{type:l.status==="有效"?"success":"danger"},{default:a(()=>[f(y(l.status),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1}),t(p,{shadow:"hover",class:"device-category-card"},{default:a(()=>[t(_e,{modelValue:M.value,"onUpdate:modelValue":e[6]||(e[6]=l=>M.value=l)},{default:a(()=>[t($,{label:"设备概览",name:"overview"},{default:a(()=>[t(z,{gutter:20},{default:a(()=>[(k(!0),N(ae,null,le(D.value,l=>(k(),P(x,{span:8,key:l.name},{default:a(()=>[t(p,{shadow:"never",class:"category-box"},{header:a(()=>[n("div",$e,[t(s,null,{default:a(()=>[(k(),P(xe(l.icon)))]),_:2},1024),n("span",null,y(l.name),1)])]),default:a(()=>[n("div",Fe,[n("div",Ie,[e[17]||(e[17]=n("span",{class:"label"},"许可数量:",-1)),n("span",Ue,y(l.total),1)]),n("div",Ne,[e[18]||(e[18]=n("span",{class:"label"},"已使用:",-1)),n("span",Oe,y(l.used),1)]),n("div",Pe,[e[19]||(e[19]=n("span",{class:"label"},"告警:",-1)),n("span",Re,y(l.warning),1)]),t(b,{percentage:l.used/l.total*100,status:l.warning>0?"warning":"success",format:()=>`${Math.round(l.used/l.total*100)}% 已使用`},null,8,["percentage","status","format"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t($,{label:"设备列表",name:"list"},{default:a(()=>[n("div",qe,[t(me,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=l=>h.value=l),placeholder:"搜索设备名称/IP/位置",style:{width:"200px"},class:"filter-item",onInput:A},{prefix:a(()=>[t(s,null,{default:a(()=>[t(O(be))]),_:1})]),_:1},8,["modelValue"]),t(K,{modelValue:B.value,"onUpdate:modelValue":e[2]||(e[2]=l=>B.value=l),placeholder:"设备类型",clearable:"",style:{width:"150px"},onChange:A},{default:a(()=>[(k(!0),N(ae,null,le(D.value,l=>(k(),P(V,{key:l.name,label:l.name,value:l.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(K,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=l=>w.value=l),placeholder:"状态",clearable:"",style:{width:"120px"},onChange:A},{default:a(()=>[t(V,{label:"在线",value:"online"}),t(V,{label:"离线",value:"offline"}),t(V,{label:"告警",value:"warning"})]),_:1},8,["modelValue"]),t(u,{type:"primary",onClick:A},{default:a(()=>e[20]||(e[20]=[f("筛选")])),_:1,__:[20]}),t(u,{onClick:ie},{default:a(()=>e[21]||(e[21]=[f("重置")])),_:1,__:[21]})]),t(J,{data:L.value,style:{width:"100%"},border:"",stripe:""},{default:a(()=>[t(d,{prop:"name",label:"设备名称","min-width":"150"}),t(d,{prop:"category",label:"设备类型",width:"120"}),t(d,{prop:"ip",label:"IP地址",width:"150"}),t(d,{prop:"location",label:"位置",width:"150"}),t(d,{prop:"status",label:"状态",width:"100"},{default:a(({row:l})=>[t(Z,{type:re(l.status)},{default:a(()=>[f(y(l.status),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"lastActive",label:"最后活动",width:"180"}),t(d,{label:"操作",width:"200",fixed:"right"},{default:a(({row:l})=>[t(fe,null,{default:a(()=>[t(u,{type:"primary",size:"small",onClick:W=>de(l)},{default:a(()=>e[22]||(e[22]=[f("详情")])),_:2,__:[22]},1032,["onClick"]),t(u,{type:"warning",size:"small",onClick:W=>ce(l)},{default:a(()=>e[23]||(e[23]=[f("编辑")])),_:2,__:[23]},1032,["onClick"]),t(u,{type:"danger",size:"small",onClick:W=>pe(l)},{default:a(()=>e[24]||(e[24]=[f("删除")])),_:2,__:[24]},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),n("div",Xe,[t(ve,{background:"",layout:"total, sizes, prev, pager, next",total:L.value.length,"page-sizes":[10,20,50,100],"current-page":X.value,"onUpdate:currentPage":e[4]||(e[4]=l=>X.value=l),"page-size":j.value,"onUpdate:pageSize":e[5]||(e[5]=l=>j.value=l)},null,8,["total","current-page","page-size"])])]),_:1}),t($,{label:"统计分析",name:"stats"},{default:a(()=>[t(z,{gutter:20},{default:a(()=>[t(x,{span:12},{default:a(()=>[n("div",{ref_key:"deviceStatusChart",ref:v,class:"chart-container"},null,512)]),_:1}),t(x,{span:12},{default:a(()=>[n("div",{ref_key:"deviceTypeChart",ref:_,class:"chart-container"},null,512)]),_:1})]),_:1}),t(z,{gutter:20,style:{"margin-top":"20px"}},{default:a(()=>[t(x,{span:24},{default:a(()=>[n("div",{ref_key:"deviceTrendChart",ref:g,class:"chart-container trend-chart"},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),Ye=Ae(je,[["__scopeId","data-v-faebe44d"]]);export{Ye as default};
